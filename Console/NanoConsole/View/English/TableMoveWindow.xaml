<Window
	x:Class="NV.CT.NanoConsole.View.English.TableMoveWindow"
	xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
	xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
	xmlns:b="http://schemas.microsoft.com/xaml/behaviors"
	xmlns:common="clr-namespace:NV.CT.UI.Controls.Common;assembly=NV.CT.UI.Controls"
	xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
	xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
	xmlns:md="clr-namespace:MaterialDesignThemes.Wpf.Controls.MarkableTextBox;assembly=MaterialDesignThemes.Wpf"
	xmlns:wpf="clr-namespace:MaterialDesignThemes.Wpf"
	Title="Table Move"
	Width="580"
	Height="220"
	AllowsTransparency="True"
	Background="Transparent"
	ResizeMode="NoResize"
	ShowInTaskbar="False"
	WindowStyle="None"
	mc:Ignorable="d">
	<Window.Resources>
		<SolidColorBrush x:Key="SExposuresIconFillBrush">#FFA63F</SolidColorBrush>
		<SolidColorBrush x:Key="BorderColor">#16162B</SolidColorBrush>
		<Style
			x:Key="NBorderBaseStyle"
			TargetType="{x:Type Border}">
			<Setter Property="Background" Value="{DynamicResource BorderColor}" />
			<Setter Property="CornerRadius" Value="10,10,10,10" />
			<Setter Property="BorderBrush" Value="#5a5a89" />
			<Setter Property="BorderThickness" Value="0.5" />
		</Style>
		<Style
			x:Key="NBorderStyle"
			BasedOn="{StaticResource NBorderBaseStyle}"
			TargetType="{x:Type Border}">
			<Style.Triggers>
				<Trigger Property="IsMouseOver" Value="True">
					<Setter Property="Background" Value="#5a5a89" />
					<Setter Property="Opacity" Value="0.3" />
				</Trigger>
			</Style.Triggers>
		</Style>
		<Style
			x:Key="DataGridTextColumnCenterStyle"
			TargetType="{x:Type TextBlock}">
			<Setter Property="HorizontalAlignment" Value="Center" />
			<Setter Property="VerticalAlignment" Value="Center" />

		</Style>
		<Style
			x:Key="ImgStyle"
			TargetType="Image">
			<Setter Property="HorizontalAlignment" Value="Stretch" />
			<Setter Property="VerticalAlignment" Value="Stretch" />
		</Style>
		<Style TargetType="TextBlock">
			<Setter Property="Margin" Value="4,8,8,8" />
			<Setter Property="Foreground" Value="White" />
			<Setter Property="FontFamily" Value="Microsoft YaHei" />
			<Setter Property="FontSize" Value="16" />
			<Setter Property="HorizontalAlignment" Value="Center" />
			<Setter Property="VerticalAlignment" Value="Center" />
		</Style>
	</Window.Resources>
	<Grid>
		<Border
			Background="#14142B"
			BorderBrush="#5A5A89"
			BorderThickness="1"
			CornerRadius="5">
			<b:Interaction.Triggers>
				<b:EventTrigger EventName="MouseLeftButtonDown">
					<b:InvokeCommandAction
						Command="{Binding Commands[DragMoveCommand]}"
						CommandParameter="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType=Window}}" />
				</b:EventTrigger>
			</b:Interaction.Triggers>
			<Grid>
				<Grid.ColumnDefinitions>
					<ColumnDefinition Width="10" />
					<ColumnDefinition />
					<ColumnDefinition Width="10" />
					<ColumnDefinition />
					<ColumnDefinition Width="10" />
				</Grid.ColumnDefinitions>
				<Grid.RowDefinitions>
					<RowDefinition Height="40" />
					<RowDefinition Height="40" />
					<RowDefinition Height="40" />
					<RowDefinition Height="40" />
					<RowDefinition Height="*" />
				</Grid.RowDefinitions>
				<Border
					Grid.ColumnSpan="5"
					Background="#5A5A89"
					CornerRadius="5, 5, 0, 0"
					Opacity="0.3" />
				<!--  标题头  -->
				<StackPanel
					Grid.Row="0"
					Grid.Column="0"
					Grid.ColumnSpan="4"
					Margin="10,0,0,0"
					HorizontalAlignment="Left"
					VerticalAlignment="Bottom"
					Orientation="Horizontal">
					<Image
						Width="20"
						Height="20"
						Source="pack://application:,,,/NV.CT.UI.Controls;component/Icons/Custom.png" />
					<Label
						Margin="10,0,0,0"
						Foreground="White">
						Table Move
					</Label>
				</StackPanel>
				<!--  关闭按钮  -->
				<Button
					Grid.Row="0"
					Grid.Column="3"
					Width="22"
					Margin="0,0,10,0"
					HorizontalAlignment="Right"
					VerticalAlignment="Center"
					Command="{Binding Commands[CloseCommand]}"
					CommandParameter="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType=Window}}"
					Style="{StaticResource MaterialDesignIconButton}">
					<Path Style="{StaticResource TileClosePathStyle}" />
				</Button>

				<!--  文字提示行  -->
				<Grid
					Grid.Row="1"
					Grid.Column="0"
					Grid.ColumnSpan="5"
					HorizontalAlignment="Center">

					<TextBlock
						Foreground="DarkGray"
						Text="{Binding Tips}" />

					<!--<StackPanel Orientation="Horizontal">
						<TextBlock Text="Tips: valid table position range from " />
						<TextBlock Text="{Binding ValidHMin}" />
						<TextBlock Text=" to " />
						<TextBlock Text="{Binding ValidHMax}" />
						<TextBlock Text=" and height from " />
						<TextBlock Text="{Binding ValidVMin}" />
						<TextBlock Text=" to " />
						<TextBlock Text="{Binding ValidVMax}" />
					</StackPanel>-->

				</Grid>

				<!--  床水平和高度输入行  -->
				<Grid
					Grid.Row="2"
					Grid.Column="0"
					Grid.ColumnSpan="5"
					Margin="0,0,0,0">
					<Grid.ColumnDefinitions>
						<ColumnDefinition Width="20" />
						<ColumnDefinition Width="0" />
						<ColumnDefinition Width="*" />
						<ColumnDefinition Width="20" />
					</Grid.ColumnDefinitions>
					<StackPanel
						Grid.Column="2"
						HorizontalAlignment="Center"
						Orientation="Horizontal">
						<TextBlock Text="Table position" />

						<!--  床水平位置  -->
						<TextBox
							Width="80"
							HorizontalContentAlignment="Right"
							BorderBrush="Transparent"
							BorderThickness="0"
							Style="{StaticResource NormalTextBox}"
							Text="{Binding Path=InputPosition, Mode=TwoWay, UpdateSourceTrigger=LostFocus}">
							<!--<TextBox.InputBindings>
								<KeyBinding
									Key="Enter"
									Command="{Binding Commands[PrepareTableMoveCommand]}" />
							</TextBox.InputBindings>-->
						</TextBox>


						<TextBlock Text="mm , Table height" />

						<!--  床高度  -->
						<TextBox
							x:Name="txtTableHeight"
							Width="80"
							HorizontalContentAlignment="Right"
							BorderBrush="Transparent"
							BorderThickness="0"
							Style="{StaticResource NormalTextBox}"
							Text="{Binding Path=InputHeight, Mode=TwoWay, UpdateSourceTrigger=LostFocus}">
							<!--<TextBox.InputBindings>
								<KeyBinding
									Key="Enter"
									Command="{Binding Commands[PrepareTableMoveCommand]}" />
							</TextBox.InputBindings>-->
						</TextBox>

						<TextBlock Text="mm" />
					</StackPanel>
				</Grid>

				<!--  错误提示消息  -->
				<Grid
					Grid.Row="3"
					Grid.Column="0"
					Grid.ColumnSpan="5"
					HorizontalAlignment="Center">
					<TextBlock
						Foreground="{StaticResource SAlertIconFillBrush}"
						Text="{Binding ErrorMsg}" />
				</Grid>

				<!--  按钮行  -->
				<Grid
					Grid.Row="4"
					Grid.Column="0"
					Grid.ColumnSpan="5"
					Margin="0,0,60,0"
					HorizontalAlignment="Right">
					<StackPanel Orientation="Horizontal">
						<Button
							Width="100"
							Height="37"
							Margin="40,0"
							HorizontalAlignment="Center"
							Command="{Binding Commands[MoveCommand]}">
							Move
						</Button>

						<Button
							Width="100"
							Height="37"
							HorizontalAlignment="Center"
							Command="{Binding Commands[CancelCommand]}"
							CommandParameter="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType=Window}}">
							Cancel
						</Button>
					</StackPanel>
				</Grid>
			</Grid>
		</Border>
	</Grid>
</Window>