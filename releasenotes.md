# V2.0.3.10698 (`2025-8-22 release`)
### MCS(Services):
 - 日志启用级别控制
 - 连扫
 - 增强扫描
 - 缺源扫描

# V2.0.3.10450 (`2025-7-31 release`)
### MCS(Services):
 - 研发模式开启或关闭
 - DICOM压缩开启或关闭
 - 私有DICOM Tag开启或关闭
 - 扫描协议细化
 - 数据表结构更新

# V0.11(V2.0.0.9028) (`2025-4-10 release`)
### MCS(Services):
 - 网安检测整改；
 - FOV/Matrix/Slice thickness/Image increment/PreBinning关系调整；
 - 床位置及机架角度算法调整；
 - 账号及密码策略实现；
 - 账号登录及注销完善；
 - 系统锁屏及关联配置实现；
 - 小剂量业务PostOffset及下参优化；
 - 部位、协议、算法对应调整优化，界面协议选择优化；
 - 配置增加、优化及调整（产品参数配置、锁屏配置、机架旋转速度等等），移除不再使用的配置；
 - 修复数据库备份与还原失败问题；
 - 修复激光灯定位；
 - 热熔比值计算及逻辑调整；
 - 匿名归档业务实现；
 - 加密传输实现；
 - 错误码更新；
 - 增加曝光触发模式，默认时间触发；
 - 数据库表结构更新；
 - 语音延迟配置使用；
 - 图像序列描述更新；
 - 软件开发版本号更新；
 - 固件升级解决GVCP协议数据超长回复失败的问题；
 - 固件升级支持ADU类别；
 - 支持配置可以忽略探测器温度校验；
 - 支持8源、12源曝光；
 - 支持能谱模式曝光；
 - 保存预热历史
 - 水值校准的重建参数默认开启SmoothZ，统一IVRTCoef，PreBinning，Fov；
 - 校准协议支持3源、6源；
 - 校准解决扫描后偶发不自动显示生数据图；
### MRS:
 - Dicom保存的字段优化；
 - 网安需求整改；
 - 校准扫描准备时，改用异步调用接口备份校准表；
### Pipeline & Algorithm:
 - 根据算法需求，多圈轴扫使用MultiAxial算法重建，并且多圈轴扫自动不使能二次重建和骨校正；
 - 图像后处理改为可配置任意处理算法和参数；
 - 解决轴扫RTD时，出错问题。
### Bug:
 - 修复DLT重建伪影问题；

# V2.0.0.8774 (`2025-3-3 release`)
### MCS(Services):
 - 新图像控件库更新；
 - 错误码信息更新；
 - 完善扫描人体部位及增加扫描协议；
 - 增加球管电流电压及功率限制；
 - 修复激光灯开启及关联业务逻辑；
 - 完善断层像扫描流程中动态加载；
 - 修复前语音播报完成后的延时问题；
 - 修复生数据导入相关参数未写入问题；
 - 修复日志显示问题（日志文件名更新导致）；
 - 修复TestBolus业务调试相关问题；
 - 增加定位像的PreOffset的帧时间配置；
 - 修复剂量报告及黑图字符集，黑图中的电流显示问题；
 - 修复急停弹窗显示问题；
 - 开放重建Binning设置
 - 增加数据表字段；
 - 密码策略及其使用实现；
 - 限束器校准新增勾选框，默认在校准完成后自动配置校准表；
 - 硬件测试，完善生数据加载错误时，情况已经加载数据逻辑；
 - 硬件测试，kv/ma系数同步增加CollimatorOffsetEnable参数；
 - 自动校准，三源余辉校准协议配置；
 - 自动校准，SourceXZ增加扫描前提示注意事项；
### MRS:
 - 升级状态只上报升级相关的错误码，屏蔽其他错误码；
 - 当真机或主机没有安装驱动时，SDK初始化会成功，会大量产生垃圾生数据文件；
### Pipeline & Algorithm:
 - 完善多源曝光的背景散射业务：进行双源或三源曝光时，进行背景散射校正；
 - 完善剂量反馈校正功能，可以正常使用；
 - 余辉校正表增加帧时间和曝光时间字段信息；
 - 重建Binning改由上层软件下发；
 - 优化检查部位传递规则，由MRS和Pipeline直接传给算法模块使用；
 - 空气、动态增益校正表文件名规则调整；
### Bug:
 - 修复DLT重建伪影问题；
 - 修复SD散射头顶不稳定问题；
 - 修复脚到头的重建顺序问题；
 - 修复步进轴扫，圈与圈之间位置参数过大问题；
 - 修复数据分析工具不能打开校正图的问题；

# V2.0.0.8634 (`2025-2-5 release`)
### MCS(Services):
 - 支持增强扫描；
 - 支持三源曝光的相关校准；
 - 准模块看图控件的背景色修改为灰色；
### MRS:
 - 支持配置重建参数--去环校正系数RingCorrectCoef；
 - 自由扫描协议中添加 CollimatorOffsetEnable 参数；
 - 解决了多圈轴扫（非标准）的生数据编号问题；
 - 支持三源曝光采集图像；
### Pipeline & Algorithm:
 - 完善步进轴扫功能，默认使用多次单圈轴扫进行离线重建；原来使用的螺旋重建算法进行多圈轴扫重建；
### Bug:
 - 水值校准时，如果中间过程失败，校准流程还继续进行；
 - 增强扫描时，TestBolus模块中ROI区域计算问题；
 - 轴扫散射数据异常时，散射校正模块卡住的问题；
 - 算法模块加载失败的问题，使用了opencv的debug版本库；
 - 单源独立曝光时，散焦校正生成出错；
 - 上海做DLT校准找不到模体文件SH#02.raw；
 - 偏心重建结果不对；
 - RTD重建，床位置不对；
 - 有些错误编码与错误编码文档不对应，导致提示错误。

# V2.0.0.8498 (`2025-1-7 release`)
### MCS(Services):
 - 错误码更新；
 - 重建参数TV系数更新
 - 扫描协议更新
 - 支持离线重建参数前后删图；
 - 自动校准，配置文件不再支持BowtieSwitch，配置文件曝光时间默认为3ms；
 - DLT校准，计算前清空界面显示的生数据图像；
 - 水值校准，支持重建参数前后删图；
 - 水值校准，优化Tv系数为0.2；
 - 质量测试，优化显示上图数量
 - 质量测试，修改一体化膜体的配置项
 - 质量测试，更正实时状态和采集实时重建状态的状态汇总表
 - 硬件测试，修复采集测试在ImageCut后未生成灰度文件的问题；
 - 硬件测试，修复采集测试显示采集总张数的问题，目前总张数改为显示下参的总张数；
### MRS:
 - 自由模式采集，机架速度默认为0；
 - 下参失败频繁,导致影响后续采图流程
 - 周期状态更新；
### Pipeline & Algorithm:
 - 修复离线重建时，offfocalcorrect模块崩溃问题；
 - 修复非线性校准过程中出错，校准流程还继续执行的问题；
 - 将F:\SiteData\Calibration\data目录内容移动到D:\Config\ConfigMRS\ConfigRoot\config目录下；对于之前扫描的数据，需要将RawData目录下的data文件夹复制到RawData目录下的Config下面；
 - DLT校准算法与T03同步，修复bug2873，并同步更新重建模块；
 - 修复离线重建胸部伪影的问题；
 - 优化轴扫RTD算法性能；
 - 修复探测器位置校准时，由于数据异常导致校准失败的问题。
### Firmware:
 - M28，首帧出现26#,不停止曝光序列。M28要做到首帧异常不影响后面帧的mA调整。
 - M28，发生一次26#，就上报一次，不考虑连续帧报26#的情况。M28不主动停止曝光序列，是否停止曝光由系统来判断和决定。
 - M28，对发生26#的帧，不立即中止曝光，而是按照正常曝光时间结束曝光。这个便于系统评估M28的微打火图像是否还可用于重建。
 - M28，增加ARCxxxx指令，用于反馈异常的帧序号。可以考虑通过0x20拼接到PV指令后面，随POST值返给系统。
 - M28，优化了AS = 0 命令的重发机制
 - Pdu，修改内容:针对上一版在线升级多次时，可能存在多回复一次ready信号，此版优化

# V2.0.0.8410 (`2024-12-24 release`)
### MCS(Services):
 - 错误码更新;
 - 图像控件更新;
 - 偏心校准支持查看正弦图，额外采图使用动态增益的铁丝
### MRS:
 - 集成最新限束器运动；
 - 修复了采集结束时未能正确切换采集卡自由模式的问题；
 - 更新Dicom中的FilterType赋值，sharpplus -> sharp+, smoothplus -> smooth+;
 - 支持切换IVR_TV_OLD、IVR_TV；
 - 支持重建参数IVRTVCoef;
### Pipeline & Algorithm:
 - 校正后保存的投影图改为S03格式；
 - 完善球馆位置校准模块；
 - Pipeline和算法模块增加版本信息；

# V0.10 (V2.0.0.8144) (`2024-11-30 release`)
### MCS(Services):
 - 图像控件库迭代重构;
 - 扫描流程中的计算算法调整;
 - 层厚调整
 - 增加Pre / Post Delete Length计算;
### MRS:
 - 完善错误上报机制;
 - 采集卡日志按日期命名并限制单文件40M大小;
 - 支持增强扫描流程;
### Pipeline & Algorithm:
 - 校正后保存的投影图改为S03格式;
 - 完善球管位置校准模块;
 - Pipeline和算法模块增加版本信息;
### Bug:
 - 修复定位像扫描时，使用的是上一次RTD重建的限束器开口;
 - 修复Bug2725，直接上报原始错误码RDH008，而不是包装后的REC535;
 - 修复Bug1987，当前算法只支持0.165整数倍的重建层厚，对实际使用不友好;
 - 修复Bug2881，实际出图层厚与详细参数界面设置层厚不符;
### 遗漏问题:
 - Bug2893 T24-ZM0002扫描出来的头模边缘发白：目前使用骨伪影校正，Twopass后，重建会失败;

# V2.0.0.8019 (`2024-11-19 release`)
### MCS(Services):
 - 错误码更新；
 - 通信库迁移至平台库；
 - 数据库脚本更新；
 - 固件升级支持采集卡链路；
 - 固件升级功能新增控制盒、呼吸导航板、机架按键板；
 - 修复根据SourceId排序问题
### MRS:
 - 修复2.5ms曝光时间/3.5ms帧时间丢帧问题；
### Pipeline & Algorithm:
- 添加Taylor展开近似功能，能够减少光子饥饿带来的影响;
- 算法模块增加错误码描述及LOG输出;
- ZM004拼接缝不稳定，修改Pipeline配置，在散射校正前加拼缝校正;
### Bug:
- 大矩阵重建偶发性崩溃;
- 球馆位置校准，版本7912补丁导致小钢珠被删除过多数据的问题;
- 修复非线性校准时，CollimatorZ和ScanMode不对的问题;

# V1.0.0.7950 (`2024-11-9 release`)
### MCS(Services):
 - 离线重建失败错误码显示（Tooltip）
 - 预热模块默认预热次数改为20）
 - 校准模块下发SliceThickness 和ImageIncrement改为0.165的倍数）
### MRS:
 - 修复Device断联问题）
 - 修复kv系数校准时保存生数据问题）
### Pipeline & Algorithm:
 - 增加锡滤过配置）
 - 增加带金属伪影校正功能的配置文件OFFLINE）
 - 增加旧TV算法及其配置项）
 - 添加缺失的重建参数，如IterStep, IterNum, SmoothZ_Enabled, Batch_Used, pipeline命名优化
### Bug:
 - 修复钢珠位置在探测器边缘导致后续拟合等问题）
 - 手动调整偏心功能：修复保存偏心到文件时，数据文件配置没有更新的问题）
 - 写配置文件correct_pipeline.xml的offfocal扫描模式ScanMode不正确）
 - DLT校准在T24中去掉机架超出180度的限制提醒）
 - 修改OffFocal部分调用参数的错误，如开口242，增加部分参数显示的输出）
 - SKS和SD结合散射校正，内存和显存切换导致锁页内存崩溃）
 - 修复扫描流程中超时错误显示问题
 - 解决暗场扫描球管旋阳启动失败判断问题