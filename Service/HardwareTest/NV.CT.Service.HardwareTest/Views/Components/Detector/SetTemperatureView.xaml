<Grid
    x:Class="NV.CT.Service.HardwareTest.Views.Components.Detector.SetTemperatureView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:markableTextBox="clr-namespace:MaterialDesignThemes.Wpf.Controls.MarkableTextBox;assembly=MaterialDesignThemes.Wpf"
    xmlns:attachedProperty="clr-namespace:NV.CT.Service.Common.AttachedProperty;assembly=NV.CT.Service.Common"
    xmlns:converters1="clr-namespace:NV.CT.Service.Common.Converters;assembly=NV.CT.Service.Common"
    xmlns:converters="clr-namespace:NV.CT.Service.HardwareTest.Attachments.Converters"
    xmlns:detector="clr-namespace:NV.CT.Service.HardwareTest.Models.Components.Detector"
    xmlns:vm="clr-namespace:NV.CT.Service.HardwareTest.ViewModels.Components.Detector"
    mc:Ignorable="d"
    x:Name="Root"
    d:DesignHeight="550"
    d:DesignWidth="1500"
    d:DataContext="{d:DesignInstance Type=vm:SetTemperatureViewModel}">
    <Grid.Resources>
        <converters:IsValidToForegroundConverter x:Key="IsValidToForegroundConverter" />
        <converters1:DecimalPointConverter x:Key="DecimalPointConverter" />
    </Grid.Resources>
    <GroupBox Header="Set Temperature" Style="{DynamicResource StandardGroupBoxStyle}">
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition />
                <ColumnDefinition Width="auto" />
            </Grid.ColumnDefinitions>
            <Grid.RowDefinitions>
                <RowDefinition Height="*" />
                <RowDefinition Height="5" />
                <RowDefinition Height="auto" />
            </Grid.RowDefinitions>
            <ListBox
                Grid.Column="0"
                Grid.Row="0"
                Grid.ColumnSpan="2"
                HorizontalContentAlignment="Stretch"
                VerticalContentAlignment="Stretch"
                ItemsSource="{Binding Detectors}">
                <ListBox.ItemsPanel>
                    <ItemsPanelTemplate>
                        <UniformGrid Columns="4" />
                    </ItemsPanelTemplate>
                </ListBox.ItemsPanel>
                <ListBox.ItemTemplate>
                    <DataTemplate DataType="{x:Type detector:DetectorTargetTemperatureModel}">
                        <Border BorderThickness="1" BorderBrush="{StaticResource BaseTabBackBrush}">
                            <Grid Margin="5">
                                <Grid.RowDefinitions>
                                    <RowDefinition />
                                    <RowDefinition Height="auto" />
                                </Grid.RowDefinitions>
                                <ItemsControl Grid.Row="0" ItemsSource="{Binding Detects}">
                                    <ItemsControl.ItemsPanel>
                                        <ItemsPanelTemplate>
                                            <UniformGrid Columns="1" />
                                        </ItemsPanelTemplate>
                                    </ItemsControl.ItemsPanel>
                                    <ItemsControl.ItemTemplate>
                                        <DataTemplate DataType="{x:Type detector:DetectBoardSetTempModel}">
                                            <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                                                <TextBlock VerticalAlignment="Center">
                                                    <Run Text="{Binding Index}" />
                                                    <Run Text="-" />
                                                    <Run Text="{Binding CurrentSetValue, StringFormat={}{0,4:0.0}}" />
                                                    <Run Text="-" />
                                                    <Run Text="{Binding UpTemp, StringFormat={}{0,4:0.0}}" Foreground="{Binding IsUpValid, Converter={StaticResource IsValidToForegroundConverter}}" />
                                                    <Run Text="-" />
                                                    <Run Text="{Binding DownTemp, StringFormat={}{0,4:0.0}}" Foreground="{Binding IsDownValid, Converter={StaticResource IsValidToForegroundConverter}}" />
                                                    <Run Text="-" />
                                                    <Run Text="{Binding Power, StringFormat={}{0,4}}" />
                                                </TextBlock>
                                                <markableTextBox:MarkableTextBox
                                                    Margin="10 0 0 0"
                                                    Width="60"
                                                    IsEnabled="{Binding DataContext.IsDoing, Converter={StaticResource InvertBooleanConverter}, ElementName=Root}"
                                                    VerticalAlignment="Center"
                                                    VerticalContentAlignment="Center"
                                                    GotFocus="ListBoxItemGotFocus"
                                                    Style="{StaticResource WithValidationMarkableTextBox}"
                                                    attachedProperty:TextBoxAttachedProperty.InputType="UnsignedDecimal"
                                                    Text="{Binding SetValue, UpdateSourceTrigger=PropertyChanged, Converter={StaticResource DecimalPointConverter}}" />
                                            </StackPanel>
                                        </DataTemplate>
                                    </ItemsControl.ItemTemplate>
                                </ItemsControl>
                                <StackPanel
                                    Grid.Row="1"
                                    Margin="0 5 0 0"
                                    Orientation="Horizontal"
                                    HorizontalAlignment="Center">
                                    <TextBlock
                                        HorizontalAlignment="Center"
                                        VerticalAlignment="Center"
                                        Text="{Binding DetectorIndex, StringFormat='Module {0}'}" />
                                    <Button
                                        Margin="30 0 0 0"
                                        Padding="5 0"
                                        MinWidth="80"
                                        GotFocus="ListBoxItemGotFocus"
                                        Content="Set"
                                        IsEnabled="{Binding DataContext.IsDoing, Converter={StaticResource InvertBooleanConverter}, ElementName=Root}"
                                        Command="{Binding DataContext.SetCommand, ElementName=Root}"
                                        CommandParameter="{Binding}" />
                                </StackPanel>
                            </Grid>
                        </Border>
                    </DataTemplate>
                </ListBox.ItemTemplate>
            </ListBox>
            <TextBlock
                Grid.Column="0"
                Grid.Row="2"
                FontWeight="Bold"
                HorizontalAlignment="Center"
                VerticalAlignment="Center"
                TextAlignment="Center"
                Text="Format :  Channel Num - Current Set Value (℃) - Up Temperature (℃) - Down Temperature (℃) - Power - Set Value (℃)" />
            <StackPanel
                Grid.Column="1"
                Grid.Row="2"
                Orientation="Horizontal">
                <TextBlock VerticalAlignment="Center" Text="All Value" />
                <markableTextBox:MarkableTextBox
                    Margin="5 0 0 0"
                    Width="60"
                    IsEnabled="{Binding IsDoing, Converter={StaticResource InvertBooleanConverter}}"
                    VerticalContentAlignment="Center"
                    Style="{StaticResource WithValidationMarkableTextBox}"
                    attachedProperty:TextBoxAttachedProperty.InputType="UnsignedDecimal"
                    Text="{Binding AllValue, UpdateSourceTrigger=PropertyChanged, Converter={StaticResource DecimalPointConverter}}" />
                <Button
                    Margin="5 0 0 0"
                    Padding="5 0"
                    MinWidth="100"
                    IsEnabled="{Binding IsDoing, Converter={StaticResource InvertBooleanConverter}}"
                    Content="Apply"
                    Command="{Binding ApplyAllValueCommand}" />
                <Button
                    Margin="30 0 5 0"
                    Padding="5 0"
                    MinWidth="100"
                    IsEnabled="{Binding IsDoing, Converter={StaticResource InvertBooleanConverter}}"
                    Content="Set All"
                    Command="{Binding SetAllCommand}" />
            </StackPanel>
        </Grid>
    </GroupBox>
</Grid>