<Grid
    x:Class="NV.CT.Service.HardwareTest.Views.Integrations.SystemEnvironment.SystemEnvironmentView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:markableTextBox="clr-namespace:MaterialDesignThemes.Wpf.Controls.MarkableTextBox;assembly=MaterialDesignThemes.Wpf"
    xmlns:attachedProperty="clr-namespace:NV.CT.Service.Common.AttachedProperty;assembly=NV.CT.Service.Common"
    xmlns:converters1="clr-namespace:NV.CT.Service.Common.Converters;assembly=NV.CT.Service.Common"
    xmlns:converters="clr-namespace:NV.CT.Service.HardwareTest.Attachments.Converters"
    xmlns:model="clr-namespace:NV.CT.Service.HardwareTest.Models.Integrations.SystemEnvironment"
    xmlns:data="clr-namespace:NV.CT.Service.HardwareTest.Models.Integrations.SystemEnvironment.Data"
    xmlns:vm="clr-namespace:NV.CT.Service.HardwareTest.ViewModels.Integrations.SystemEnvironment"
    mc:Ignorable="d"
    x:Name="Root"
    d:DesignHeight="650"
    d:DesignWidth="800"
    d:DataContext="{d:DesignInstance Type=vm:SystemEnvironmentViewModel}">
    <Grid.Resources>
        <converters:IsValidToForegroundConverter x:Key="IsValidToForegroundConverter" />
        <converters1:DecimalPointConverter x:Key="DecimalPointConverter" />
    </Grid.Resources>
    <GroupBox Header="Set Cavity Environment" Style="{DynamicResource StandardGroupBoxStyle}">
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="auto" />
                <RowDefinition Height="auto" />
            </Grid.RowDefinitions>
            <ItemsControl ItemsSource="{Binding Parts}" d:ItemsSource="{d:SampleData ItemCount=2}">
                <ItemsControl.ItemTemplate>
                    <DataTemplate DataType="{x:Type model:SystemEnvironmentPartAbstract}">
                        <GroupBox Header="{Binding Title}" Margin="0 0 0 5">
                            <Grid>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="auto" />
                                    <RowDefinition Height="5" />
                                    <RowDefinition Height="auto" />
                                </Grid.RowDefinitions>
                                <Button
                                    Grid.Row="0"
                                    MinWidth="80"
                                    Content="Set All"
                                    HorizontalAlignment="Left"
                                    Command="{Binding DataContext.SetAllCommand, ElementName=Root}"
                                    CommandParameter="{Binding}" />
                                <ItemsControl
                                    Grid.Row="2"
                                    ItemsSource="{Binding DataInfos}"
                                    d:ItemsSource="{d:SampleData ItemCount=3}">
                                    <ItemsControl.ItemsPanel>
                                        <ItemsPanelTemplate>
                                            <WrapPanel />
                                        </ItemsPanelTemplate>
                                    </ItemsControl.ItemsPanel>
                                    <ItemsControl.Resources>
                                        <DataTemplate DataType="{x:Type data:EnableDataModel}">
                                            <Border Margin="0 5 5 0" BorderThickness="1" BorderBrush="{StaticResource BaseTabBackBrush}">
                                                <Grid Margin="10 5">
                                                    <Grid.RowDefinitions>
                                                        <RowDefinition Height="auto" />
                                                        <RowDefinition />
                                                        <RowDefinition Height="auto" />
                                                    </Grid.RowDefinitions>
                                                    <TextBlock
                                                        Grid.Row="0"
                                                        HorizontalAlignment="Center"
                                                        Text="{Binding Title}" />
                                                    <ComboBox
                                                        Grid.Row="1"
                                                        Width="100"
                                                        HorizontalAlignment="Center"
                                                        SelectedItem="{Binding IsEnable, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                                        ItemsSource="{Binding DataContext.EnableTypes, ElementName=Root}" />
                                                    <Button
                                                        Grid.Row="2"
                                                        MinWidth="80"
                                                        Content="Set"
                                                        HorizontalAlignment="Center"
                                                        Command="{Binding DataContext.SetCommand, ElementName=Root}"
                                                        CommandParameter="{Binding}" />
                                                </Grid>
                                            </Border>
                                        </DataTemplate>
                                        <DataTemplate DataType="{x:Type data:RangeDataModel}">
                                            <Border Margin="0 5 5 0" BorderThickness="1" BorderBrush="{StaticResource BaseTabBackBrush}">
                                                <Grid Margin="10 5">
                                                    <Grid.ColumnDefinitions>
                                                        <ColumnDefinition />
                                                        <ColumnDefinition Width="5" />
                                                        <ColumnDefinition />
                                                    </Grid.ColumnDefinitions>
                                                    <Grid.RowDefinitions>
                                                        <RowDefinition Height="auto" />
                                                        <RowDefinition Height="2" />
                                                        <RowDefinition />
                                                        <RowDefinition Height="2" />
                                                        <RowDefinition />
                                                        <RowDefinition Height="2" />
                                                        <RowDefinition />
                                                        <RowDefinition Height="5" />
                                                        <RowDefinition Height="auto" />
                                                    </Grid.RowDefinitions>
                                                    <TextBlock
                                                        Grid.Column="0"
                                                        Grid.Row="0"
                                                        Grid.ColumnSpan="3"
                                                        HorizontalAlignment="Center">
                                                        <TextBlock.Text>
                                                            <MultiBinding StringFormat="{}{0} ({1})">
                                                                <Binding Path="Title" />
                                                                <Binding Path="Unit" />
                                                            </MultiBinding>
                                                        </TextBlock.Text>
                                                    </TextBlock>
                                                    <TextBlock
                                                        Grid.Column="0"
                                                        Grid.Row="2"
                                                        VerticalAlignment="Center"
                                                        Text="Current Value" />
                                                    <TextBlock
                                                        Grid.Column="2"
                                                        Grid.Row="2"
                                                        HorizontalAlignment="Center"
                                                        VerticalAlignment="Center"
                                                        Foreground="{Binding IsValid, Converter={StaticResource IsValidToForegroundConverter}}"
                                                        Text="{Binding Value, StringFormat={}{0:0.0}}" />
                                                    <TextBlock
                                                        Grid.Column="0"
                                                        Grid.Row="4"
                                                        VerticalAlignment="Center"
                                                        Text="Upper Limit" />
                                                    <markableTextBox:MarkableTextBox
                                                        Grid.Column="2"
                                                        Grid.Row="4"
                                                        Width="60"
                                                        Style="{StaticResource WithValidationMarkableTextBox}"
                                                        attachedProperty:TextBoxAttachedProperty.InputType="UnsignedDecimal"
                                                        Text="{Binding UpperLimit, UpdateSourceTrigger=PropertyChanged, Converter={StaticResource DecimalPointConverter}}" />
                                                    <TextBlock
                                                        Grid.Column="0"
                                                        Grid.Row="6"
                                                        VerticalAlignment="Center"
                                                        Text="Lower Limit" />
                                                    <markableTextBox:MarkableTextBox
                                                        Grid.Column="2"
                                                        Grid.Row="6"
                                                        Width="60"
                                                        Style="{StaticResource WithValidationMarkableTextBox}"
                                                        attachedProperty:TextBoxAttachedProperty.InputType="UnsignedDecimal"
                                                        Text="{Binding LowerLimit, UpdateSourceTrigger=PropertyChanged, Converter={StaticResource DecimalPointConverter}}" />
                                                    <Button
                                                        Grid.Column="0"
                                                        Grid.Row="8"
                                                        Grid.ColumnSpan="3"
                                                        MinWidth="80"
                                                        Content="Set"
                                                        HorizontalAlignment="Center"
                                                        Command="{Binding DataContext.SetCommand, ElementName=Root}"
                                                        CommandParameter="{Binding}" />
                                                </Grid>
                                            </Border>
                                        </DataTemplate>
                                    </ItemsControl.Resources>
                                </ItemsControl>
                            </Grid>
                        </GroupBox>
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl>
            <Button
                Grid.Row="1"
                Content="Set All Cavities"
                HorizontalAlignment="Left"
                Style="{StaticResource ServiceCommonButton}"
                Command="{Binding SetAllPartsCommand}" />
        </Grid>
    </GroupBox>
</Grid>