<UserControl x:Class="NV.CT.UserConfig.View.English.PatientSettingControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:md="clr-namespace:MaterialDesignThemes.Wpf.Controls.MarkableTextBox;assembly=MaterialDesignThemes.Wpf"  
             xmlns:res="clr-namespace:NV.CT.Language;assembly=NV.CT.Language"
             mc:Ignorable="d" 
             d:DesignHeight="850" d:DesignWidth="1200">
    <Border BorderThickness="1" CornerRadius="10" BorderBrush="#5A5A89">
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="30"></RowDefinition>
                <RowDefinition Height="40"></RowDefinition>
                <RowDefinition Height="60"></RowDefinition>
                <RowDefinition Height="60"></RowDefinition>
                <RowDefinition Height="60"></RowDefinition>
                <RowDefinition Height="60"></RowDefinition>
                <RowDefinition Height="60"></RowDefinition>
                <RowDefinition Height="60"></RowDefinition>
                <RowDefinition Height="60"></RowDefinition>
                <RowDefinition Height="60"></RowDefinition>
                <RowDefinition Height="*"></RowDefinition>
                <RowDefinition Height="60"></RowDefinition>
                <RowDefinition Height="20"></RowDefinition>
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="30"></ColumnDefinition>
                <ColumnDefinition Width="482"></ColumnDefinition>
                <ColumnDefinition Width="50"></ColumnDefinition>
                <ColumnDefinition Width="200"></ColumnDefinition>
                <ColumnDefinition Width="300"></ColumnDefinition>
                <ColumnDefinition Width="*"></ColumnDefinition>
            </Grid.ColumnDefinitions>
            <Grid Grid.Column="1" Grid.Row="1">
                <Label x:Name="lblDisplay" FontSize="15" FontWeight="Bold" Margin="0,8,0,0" Content="{x:Static res:LanguageResource.Content_DisplayItems}" 
                        HorizontalAlignment="Left" 
                        VerticalAlignment="Center" 
                        Height="34" Foreground="#FFC6C6EC" />
                <Rectangle VerticalAlignment="Bottom" Grid.Column="0" Stroke="#3044D9" StrokeThickness="3" 
                           Height="3" Width="{Binding ActualWidth,ElementName=lblDisplay}" HorizontalAlignment="Left"
                            Margin="0,0,0,3" SnapsToDevicePixels="True" 
                           />
            </Grid>
            <Border Grid.Row="2" Grid.Column="1" Grid.RowSpan="9" BorderThickness="1" CornerRadius="10" 
                    BorderBrush="#5A5A89" Margin="0,10,0,0">
                <DataGrid Grid.Row="2" Grid.Column="1" Grid.RowSpan="9" Name="grdPatientItem" 
                          AutoGenerateColumns="False" 
                          Style="{x:Null}"
                          CellStyle="{StaticResource MaterialDesignDataGridCell}"
                          ItemsSource="{Binding CurrentPatientConfig.DisplayItems.Items,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}"
                          VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Hidden" 
                          BorderThickness="0"
                          RowHeaderWidth="0"
                          Background="Transparent"
                          IsReadOnly="True"
                          CanUserAddRows="False"
                          SelectionUnit="FullRow"
                          SelectionMode="Single">
                    <!--BasedOn="{StaticResource DefaultDataGridColumnHeader }"-->
                    <DataGrid.ColumnHeaderStyle>
                        <Style TargetType="{x:Type DataGridColumnHeader}" BasedOn="{StaticResource MaterialDesignDataGridColumnHeader}">
                            <Setter Property="Height" Value="40"></Setter>
                        </Style>
                    </DataGrid.ColumnHeaderStyle>

                    <DataGrid.Columns>
                        <DataGridTemplateColumn Header="Item name" Width="350">
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <TextBlock HorizontalAlignment="Left"  Text="{Binding ItemName}" VerticalAlignment="Center" 
                                               Margin="5 0 0 0" FontSize="14" FontFamily="Microsoft YaHei" 
                                               IsEnabled="{Binding IsEnabled}" />
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>
                        <DataGridTemplateColumn Header="Display" Width="132">
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <CheckBox  HorizontalAlignment="Left" Margin="5,0,0,0" 
                                               IsChecked="{Binding CheckState, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged  }" 
                                               IsEnabled="{Binding IsEnabled}" />
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>
                    </DataGrid.Columns>
                    <DataGrid.RowStyle>
                        <Style TargetType="{x:Type DataGridRow}" BasedOn="{StaticResource MaterialDesignDataGridRow}">
                            <Setter Property="HorizontalAlignment" Value="Left" />
                            <Setter Property="VerticalContentAlignment" Value="Center"></Setter>
                            <Setter Property="Height" Value="40"></Setter>
                            <Setter Property="Background" Value="Transparent"></Setter>
                            <Setter Property="BorderThickness" Value="0"></Setter>
                            <Setter Property="IsEnabled" Value="{Binding IsEnabled}"></Setter>
                        </Style>
                    </DataGrid.RowStyle>
                </DataGrid>
            </Border>
            <Grid Grid.Row="1" Grid.Column="3">
                <Label x:Name="lblChildrenAge" FontSize="15" FontWeight="Bold" Margin="0,8,0,0" Content="{x:Static res:LanguageResource.Content_ChildrenAge}" HorizontalAlignment="Left" 
                        VerticalAlignment="Center" Grid.ColumnSpan="2" Height="34" Foreground="#FFC6C6EC" />
                <Rectangle VerticalAlignment="Bottom"  Grid.Column="0"  Stroke="#3044D9" Height="3" StrokeThickness="3" 
                           HorizontalAlignment="Left" Margin="0,0,0,3"
                           Width="{Binding ActualWidth,ElementName=lblChildrenAge}" SnapsToDevicePixels="True" />
            </Grid>
            <Label Grid.Row="2" Grid.Column="3" Name="childtitle" Foreground="White"
                   HorizontalAlignment="Left" VerticalAlignment="Center" Content="{x:Static res:LanguageResource.Content_UpperAgeLimitForChildren}" />
            
            <md:MarkableTextBox Grid.Row="2" Grid.Column="4" Foreground="White" Minimum="2" Maximum="12" FontSize="14px" TextType="Decimal" VerticalContentAlignment="Center" Margin="0 0 5 0" Text="{Binding AdultAgeThreshold,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}" />
            
            <Grid Grid.Row="3" Grid.Column="3">
                <Label x:Name="lblRefreshTime" FontSize="15" FontWeight="Bold" Margin="0,8,0,0" Content="{x:Static res:LanguageResource.Content_RefreshTime}" 
                       HorizontalAlignment="Left" VerticalAlignment="Center" 
                       Height="33" Foreground="#FFC6C6EC" />
                <Rectangle VerticalAlignment="Bottom"  Grid.Column="0" 
                           Stroke="#3044D9" Height="3" StrokeThickness="3" 
                           Width="{Binding ActualWidth,ElementName=lblRefreshTime}" HorizontalAlignment="Left"
                           Margin="0,0,0,12" SnapsToDevicePixels="True" />
            </Grid>
            <Label Grid.Row="4" Grid.Column="3" Name="patientdata" Foreground="White"
                   HorizontalAlignment="Left" VerticalAlignment="Center" Content="{x:Static res:LanguageResource.Content_Interval}" />
            <WrapPanel Grid.Row="4" Grid.Column="4" Orientation="Horizontal" VerticalAlignment="Center">
                <RadioButton Name="rb10" Content="10 s" GroupName="interval" Foreground="White" IsChecked="{Binding Path=IntervalCheckStates[10],Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}" Command="{Binding Commands[SelectIntervalCommand]}" CommandParameter="10" />
                <RadioButton Name="rb30" Content="30 s" GroupName="interval" Margin="10,0,0,0" Foreground="White" IsChecked="{Binding Path=IntervalCheckStates[30],Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}" Command="{Binding Commands[SelectIntervalCommand]}" CommandParameter="30" />
                <RadioButton Name="rb60" Content="60 s" GroupName="interval" Margin="10,0,0,0" Foreground="White" IsChecked="{Binding Path=IntervalCheckStates[60],Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}" Command="{Binding Commands[SelectIntervalCommand]}" CommandParameter="60" />
                <RadioButton Name="rb600" Content="10 m" GroupName="interval" Margin="10,0,0,0" Foreground="White" IsChecked="{Binding Path=IntervalCheckStates[600],Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}" Command="{Binding Commands[SelectIntervalCommand]}" CommandParameter="600" />
                <RadioButton Name="rb1800" Content="30 m" GroupName="interval" Margin="10,0,0,0" Foreground="White" IsChecked="{Binding Path=IntervalCheckStates[1800],Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}" Command="{Binding Commands[SelectIntervalCommand]}" CommandParameter="1800" />
            </WrapPanel>
            <ListBox Style="{x:Null}" BorderThickness="0" Grid.Row="4" Grid.Column="4" Visibility="Collapsed" Background="Transparent" 
                     SelectedItem="{Binding SelectedInterval,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}"
                 ItemsSource="{Binding TimeIntervals,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}" SelectedValuePath="Value" 
                 Margin="0,0,0,0">
                <ListBox.ItemContainerStyle>
                    <Style TargetType="ListBoxItem">
                        <Setter Property="Background" Value="Transparent"></Setter>
                        <Setter Property="HorizontalAlignment" Value="Center"></Setter>
                        <Setter Property="VerticalContentAlignment" Value="Center"></Setter>
                        <Setter Property="IsSelected" Value="False"></Setter>
                    </Style>
                </ListBox.ItemContainerStyle>
                <ListBox.ItemsPanel>
                    <ItemsPanelTemplate>
                        <WrapPanel Orientation="Horizontal" HorizontalAlignment="Left">
                        </WrapPanel>
                    </ItemsPanelTemplate>
                </ListBox.ItemsPanel>
                <ListBox.ItemTemplate>
                    <DataTemplate>
                        <RadioButton Content="10 s" GroupName="interval" Command="{Binding Commands[SelectIntervalCommand]}" CommandParameter="{Binding Content,RelativeSource={RelativeSource Mode=Self}}" Foreground="White" />
                    </DataTemplate>
                </ListBox.ItemTemplate>
            </ListBox>
            <Grid Grid.Row="5" Grid.Column="3">
                <Label x:Name="lblPatientIdConfig" FontSize="15" FontWeight="Bold" Margin="0,9,0,0" 
                       Content="{x:Static res:LanguageResource.Content_PatientIdConfiguration}" 
                       HorizontalAlignment="Left"  VerticalAlignment="Center" Grid.ColumnSpan="2" 
                       Height="25" Foreground="#FFC6C6EC" />
                <Rectangle Grid.Column="0" Stroke="#3044D9" StrokeThickness="3" 
                           Height="3"  Width="{Binding ActualWidth,ElementName=lblPatientIdConfig}" 
                           HorizontalAlignment="Left" VerticalAlignment="Bottom"
                           Margin="0,0,0,10"
                           SnapsToDevicePixels="True" 
                            />
            </Grid>
            <Label Grid.Row="6" Grid.Column="3" Name="lblPrefix" Foreground="White"
                   HorizontalAlignment="Left" VerticalAlignment="Center" Content="{x:Static res:LanguageResource.Content_Prefix}"  />
            <md:MarkableTextBox Grid.Row="6" Grid.Column="4" x:Name="txtPrefix" Text="{Binding CurrentPrefix,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}" MaxLength="4" InputMethod.IsInputMethodEnabled="False"/>
            <Label Grid.Row="7" Grid.Column="3" Name="lblInfix" Foreground="White"
                   HorizontalAlignment="Left" VerticalAlignment="Center" Content="{x:Static res:LanguageResource.Content_Infix}" />
            <md:MarkableTextBox Grid.Row="7" Grid.Column="4" x:Name="txtInfix" Text="{Binding CurrentInfix,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}" MaxLength="4" InputMethod.IsInputMethodEnabled="False" />
            <Label Grid.Row="8" Grid.Column="3" Name="lblSuffixType" Foreground="White"
                   HorizontalAlignment="Left" VerticalAlignment="Center" Content="{x:Static res:LanguageResource.Content_SuffixType}" />
            <Grid Grid.Row="8" Grid.Column="4" VerticalAlignment="Center">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="105"/>
                    <ColumnDefinition/>
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition/>
                </Grid.RowDefinitions>
                <RadioButton Name="rbTimeFormat" Content="{x:Static res:LanguageResource.Content_TimeFormat}" GroupName="suffixType" Tag="TimeFormat" IsChecked="{Binding Path=SuffixTypeCheckStates[TimeFormat],Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}" Foreground="White" 
                             Command="{Binding Commands[SelectSuffixTypeCommand]}" CommandParameter="{Binding Tag,RelativeSource={RelativeSource Mode=Self}}"/>
                <RadioButton Grid.Column="1" Name="rbSelfAccretion" Content="{x:Static res:LanguageResource.Content_SelfAccretion}" GroupName="suffixType" Tag="SelfAccretion" Margin="10,0,0,0" IsChecked="{Binding Path=SuffixTypeCheckStates[SelfAccretion],Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}" Foreground="White" 
                             Command="{Binding Commands[SelectSuffixTypeCommand]}" CommandParameter="{Binding Tag,RelativeSource={RelativeSource Mode=Self}}"/>
            </Grid>
            <Label Grid.Row="9" Grid.Column="3" Name="lblPreview" Foreground="White"
                   HorizontalAlignment="Left" VerticalAlignment="Center" Content="{x:Static res:LanguageResource.Content_Preview}" />
            <TextBox Grid.Row="9" Grid.Column="4" x:Name="txtPreview" Text="{Binding CurrentPreview,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}" IsEnabled="False"/>

            <Button Grid.Row="10" Grid.Column="4" Width="120" Height="40" x:Name="btn_Save" 
                    HorizontalAlignment="Right" VerticalAlignment="Bottom" Command="{Binding Commands[SaveCommand]}">Save</Button>
        </Grid>
    </Border>
</UserControl>