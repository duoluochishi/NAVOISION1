<UserControl
    x:Class="NV.CT.ImageViewer.View.Control3D"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:i="http://schemas.microsoft.com/xaml/behaviors"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:res="clr-namespace:NV.CT.Language;assembly=NV.CT.Language"
    d:DesignHeight="900"
    d:DesignWidth="300"
    mc:Ignorable="d">
    <UserControl.Resources>
        <Style x:Key="BaseStyle" TargetType="{x:Type FrameworkElement}">
            <Setter Property="Width" Value="28" />
            <Setter Property="Height" Value="28" />
            <Setter Property="Margin" Value="5" />
            <Setter Property="Cursor" Value="Hand" />
        </Style>
        <Style BasedOn="{StaticResource BaseStyle}" TargetType="{x:Type TextBlock}">
            <Setter Property="Padding" Value="5" />
        </Style>
        <Style BasedOn="{StaticResource BaseStyle}" TargetType="{x:Type Button}">
            <Setter Property="BorderThickness" Value="0" />
        </Style>
        <Style x:Key="ComplexGrid" TargetType="{x:Type Grid}">
            <Setter Property="Width" Value="40" />
            <Setter Property="Height" Value="41" />
            <Setter Property="Margin" Value="3,0,3,0" />
            <Setter Property="Cursor" Value="Hand" />
        </Style>
        <Style x:Key="SimpleProgressBar" TargetType="{x:Type ProgressBar}">
            <Setter Property="Background" Value="#5A5A89" />
            <Setter Property="Foreground" Value="#FFA640" />
        </Style>
        <!--<Style TargetType="{x:Type ToolTip}">
            <Setter Property="HorizontalOffset" Value="5" />
            <Setter Property="VerticalOffset" Value="5" />
            <Setter Property="Background" Value="Black" />
            <Setter Property="Placement" Value="Right" />
            <Setter Property="BorderThickness" Value="0" />
        </Style>-->
        <Style TargetType="ContextMenu">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="ContextMenu">
                        <Grid>
                            <!--<Path Stroke="#353557"  Data="M168,0.5 L18,0.5 C15.3766474,0.5 13.0016474,1.56332372 11.2824856,3.28248558 C9.56332372,5.00164744 8.5,7.37664744 8.5,10 L8.5,53.1900997 L0.668977477,62 L8.5,70.8099003 L8.5,303 C8.5,305.623353 9.56332372,307.998353 11.2824856,309.717514 C13.0016474,311.436676 15.3766474,312.5 18,312.5 L168,312.5 C170.623353,312.5 172.998353,311.436676 174.717514,309.717514 C176.436676,307.998353 177.5,305.623353 177.5,303 L177.5,10 C177.5,7.37664744 176.436676,5.00164744 174.717514,3.28248558 C172.998353,1.56332372 170.623353,0.5 168,0.5 Z"  StrokeThickness="1.6" Fill="#16162B"  HorizontalAlignment="Left">
                        </Path>-->
                            <Border
                                x:Name="my_border"
                                Width="auto"
                                Height="auto"
                                Padding="0"
                                Background="#16162B"
                                BorderBrush="#4F4F79"
                                BorderThickness="1.5,1.5,1.5,1.5"
                                CornerRadius="5"
                                SnapsToDevicePixels="True">
                                <ItemsPresenter Margin="0" />
                            </Border>
                        </Grid>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        <Style TargetType="{x:Type MenuItem}">
            <Setter Property="Background" Value="#16162B" />
            <Setter Property="Padding" Value="5" />
        </Style>
        <Style TargetType="{x:Type Separator}">
            <Setter Property="Height" Value="1" />
        </Style>
    </UserControl.Resources>

    <Grid x:Name="grdIcon">
        <Grid.RowDefinitions>
            <RowDefinition Height="60" />
            <RowDefinition Height="auto" />
            <RowDefinition Height="60" />
            <RowDefinition Height="auto" />
            <RowDefinition Height="60" />
            <RowDefinition Height="auto" />
            <RowDefinition Height="60" />
            <RowDefinition Height="auto" />
            <RowDefinition Height="60" />
            <RowDefinition Height="auto" />
        </Grid.RowDefinitions>

        <!--  View标签  -->
        <Label
            Grid.Row="0"
            Margin="0,5"
            HorizontalAlignment="Stretch"
            VerticalAlignment="Center"
            HorizontalContentAlignment="Center"
            VerticalContentAlignment="Center"
            Background="#5A5A89"
            Content="View"
            FontSize="15"
            FontWeight="Bold"
            Foreground="White"
            Opacity="0.7" />
        <StackPanel
            Name="spView"
            Grid.Row="1"
            Orientation="Vertical">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition />
                    <ColumnDefinition />
                </Grid.ColumnDefinitions>

                <!--  移动  -->
                <TextBlock
                    x:Name="txtMove"
                    Grid.Column="0"
                    Tag="0"
                    ToolTip="{x:Static res:LanguageResource.ToolTip_Move}">
                    <TextBlock.Background>
                        <ImageBrush ImageSource="pack://application:,,,/NV.CT.UI.Controls;component/Icons/i_move_0.png" />
                    </TextBlock.Background>
                    <i:Interaction.Triggers>
                        <i:EventTrigger EventName="MouseLeftButtonDown">
                            <i:InvokeCommandAction Command="{Binding Commands[Move]}" />
                        </i:EventTrigger>
                    </i:Interaction.Triggers>
                </TextBlock>

                <!--  放大缩小  -->
                <TextBlock
                    x:Name="tbZoom"
                    Grid.Column="1"
                    Tag="0"
                    ToolTip="{x:Static res:LanguageResource.ToolTip_Zoom}">
                    <TextBlock.Background>
                        <ImageBrush ImageSource="pack://application:,,,/NV.CT.UI.Controls;component/Icons/i_zoom_0.png" />
                    </TextBlock.Background>
                    <i:Interaction.Triggers>
                        <i:EventTrigger EventName="MouseLeftButtonDown">
                            <i:InvokeCommandAction Command="{Binding Commands[Zoom]}" />
                        </i:EventTrigger>
                    </i:Interaction.Triggers>
                </TextBlock>
            </Grid>

            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition />
                    <ColumnDefinition />
                </Grid.ColumnDefinitions>

                <!--  窗宽窗高 WW/WL  -->
                <Grid
                    Grid.Column="0"
                    Style="{StaticResource ComplexGrid}"
                    ToolTip="{x:Static res:LanguageResource.ToolTip_WL}">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition />
                        <ColumnDefinition Width="6" />
                    </Grid.ColumnDefinitions>
                    <TextBlock x:Name="txtWWWL" Tag="0">
                        <TextBlock.Background>
                            <ImageBrush ImageSource="pack://application:,,,/NV.CT.UI.Controls;component/Icons/i_window_0.png" />
                        </TextBlock.Background>
                        <i:Interaction.Triggers>
                            <i:EventTrigger EventName="MouseLeftButtonDown">
                                <i:InvokeCommandAction Command="{Binding Commands[Wwwl]}" />
                            </i:EventTrigger>
                        </i:Interaction.Triggers>
                    </TextBlock>
                    <Label
                        x:Name="labelWwWl"
                        Grid.Column="1"
                        Margin="0,0,0,7"
                        VerticalAlignment="Bottom"
                        MouseLeftButtonDown="LabelWwWl_OnMouseLeftButtonDown">
                        <Label.Content>
                            <Path
                                Width="6"
                                Height="6"
                                Fill="{StaticResource TextBoxBrush}"
                                Stretch="Fill"
                                Style="{StaticResource Down}" />
                        </Label.Content>
                        <Label.ContextMenu>
                            <ContextMenu
                                x:Name="menuWwWl"
                                ItemsSource="{Binding WWWLItems}"
                                Placement="MousePoint">
                                <ContextMenu.ItemTemplate>
                                    <DataTemplate>
                                        <TextBlock
                                            MouseLeftButtonDown="UIElement_OnMouseLeftButtonDown"
                                            Tag="{Binding}"
                                            Text="{Binding Description}" />

                                        <!--<Grid>
                                            <Grid.RowDefinitions>
                                                <RowDefinition Height="*" />
                                                <RowDefinition Height="4" />
                                            </Grid.RowDefinitions>
                                            <Separator Grid.Row="1" />
                                        </Grid>-->

                                        <!--<MenuItem
                                            Command="{Binding Commands[SetWWWL]}"
                                            CommandParameter=""
                                            Header="{Binding DisplayBodyPart}"
                                            Style="{StaticResource BackendMenuItem}" />-->
                                    </DataTemplate>
                                </ContextMenu.ItemTemplate>
                            </ContextMenu>
                        </Label.ContextMenu>
                    </Label>
                </Grid>

                <!--  旋转  -->
                <Grid
                    Grid.Column="1"
                    Style="{StaticResource ComplexGrid}"
                    ToolTip="{x:Static res:LanguageResource.ToolTip_Rotate}">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition />
                        <ColumnDefinition Width="6" />
                    </Grid.ColumnDefinitions>
                    <TextBlock x:Name="txtRotate" Tag="0">
                        <TextBlock.Background>
                            <ImageBrush ImageSource="pack://application:,,,/NV.CT.UI.Controls;component/Icons/Rotate2D_0.png" />
                        </TextBlock.Background>
                        <i:Interaction.Triggers>
                            <i:EventTrigger EventName="MouseLeftButtonDown">
                                <i:InvokeCommandAction Command="{Binding Commands[Rotate3D]}" CommandParameter="" />
                            </i:EventTrigger>
                        </i:Interaction.Triggers>
                    </TextBlock>
                    <Label
                        x:Name="labelRotate"
                        Grid.Column="1"
                        Margin="0,0,0,7"
                        VerticalAlignment="Bottom"
                        MouseLeftButtonDown="LabelRotate_OnMouseLeftButtonDown">
                        <Label.Content>
                            <Path
                                Width="6"
                                Height="6"
                                Fill="{StaticResource TextBoxBrush}"
                                Stretch="Fill"
                                Style="{StaticResource Down}" />
                        </Label.Content>
                        <Label.ContextMenu>
                            <ContextMenu x:Name="menuRotate" Placement="MousePoint">
                                <MenuItem Command="{Binding Commands[Rotate2D]}" Header=" Rotate2D " />
                                <Separator Height="1" />
                                <MenuItem Command="{Binding Commands[Rotate3D]}" Header=" Rotate3D " />
                            </ContextMenu>
                        </Label.ContextMenu>
                    </Label>
                </Grid>

            </Grid>

            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition />
                    <ColumnDefinition />
                </Grid.ColumnDefinitions>

                <!--  显示/隐藏 坐标轴  -->
                <TextBlock
                    x:Name="tbAxis"
                    Grid.Column="0"
                    Tag="0"
                    ToolTip="{x:Static res:LanguageResource.ToolTip_ShowHideAxes}">
                    <TextBlock.Background>
                        <ImageBrush ImageSource="pack://application:,,,/NV.CT.UI.Controls;component/Icons/i_hidden_co_0.png" />
                    </TextBlock.Background>
                    <i:Interaction.Triggers>
                        <i:EventTrigger EventName="MouseLeftButtonDown">
                            <i:InvokeCommandAction Command="{Binding Commands[HideAxis]}" />
                        </i:EventTrigger>
                    </i:Interaction.Triggers>
                </TextBlock>

                <!--  隐藏文本  -->
                <TextBlock
                    x:Name="tbHideTexts"
                    Grid.Column="1"
                    Tag="0"
                    ToolTip="{x:Static res:LanguageResource.Tooltip_HideTexts}">
                    <TextBlock.Background>
                        <ImageBrush ImageSource="pack://application:,,,/NV.CT.UI.Controls;component/Icons/i_hidden_text_0.png" />
                    </TextBlock.Background>
                    <i:Interaction.Triggers>
                        <i:EventTrigger EventName="MouseLeftButtonDown">
                            <i:InvokeCommandAction Command="{Binding Commands[HiddenText]}" />
                        </i:EventTrigger>
                    </i:Interaction.Triggers>
                </TextBlock>

            </Grid>


            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition />
                    <ColumnDefinition />
                </Grid.ColumnDefinitions>

                <!--  初始位置  -->
                <TextBlock
                    x:Name="tbInitialState"
                    Grid.Column="0"
                    Tag="0"
                    ToolTip="{x:Static res:LanguageResource.Tooltip_InitialState}">
                    <TextBlock.Background>
                        <ImageBrush ImageSource="pack://application:,,,/NV.CT.UI.Controls;component/Icons/i_initialposition_0.png" />
                    </TextBlock.Background>
                    <i:Interaction.Triggers>
                        <i:EventTrigger EventName="MouseLeftButtonDown">
                            <i:InvokeCommandAction Command="{Binding Commands[InitialState]}" />
                        </i:EventTrigger>
                    </i:Interaction.Triggers>
                </TextBlock>

                <!--  布局  -->
                <Grid
                    Grid.Column="1"
                    Style="{StaticResource ComplexGrid}"
                    ToolTip="{x:Static res:LanguageResource.ToolTip_Layout}">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition />
                        <ColumnDefinition Width="6" />
                    </Grid.ColumnDefinitions>
                    <TextBlock x:Name="txtLayout" Tag="0">
                        <TextBlock.Background>
                            <ImageBrush ImageSource="pack://application:,,,/NV.CT.UI.Controls;component/Icons/stack 2x1_0.png" />
                        </TextBlock.Background>
                    </TextBlock>
                    <Label
                        x:Name="labelLayout"
                        Grid.Column="1"
                        Margin="0,0,0,7"
                        VerticalAlignment="Bottom"
                        MouseLeftButtonDown="LabelLayout_OnMouseLeftButtonDown">
                        <Label.Content>
                            <Path
                                Width="6"
                                Height="6"
                                Fill="{StaticResource TextBoxBrush}"
                                Stretch="Fill"
                                Style="{StaticResource Down}" />
                        </Label.Content>
                        <Label.ContextMenu>
                            <ContextMenu x:Name="menuLayout" Placement="MousePoint">
                                <MenuItem
                                    Command="{Binding Commands[Layout]}"
                                    CommandParameter="L2R1"
                                    Header="  2Columns[2|1]  " />
                                <Separator Height="1" />
                                <MenuItem
                                    Command="{Binding Commands[Layout]}"
                                    CommandParameter="L1R2"
                                    Header="  2Columns[1|2]  " />
                                <Separator Height="1" />
                                <MenuItem
                                    Command="{Binding Commands[Layout]}"
                                    CommandParameter="C3"
                                    Header="  3Columns  " />
                                <Separator Height="1" />
                                <MenuItem
                                    Command="{Binding Commands[Layout]}"
                                    CommandParameter="U2D1"
                                    Header="  2Rows[2|1]  " />
                                <Separator Height="1" />
                                <MenuItem
                                    Command="{Binding Commands[Layout]}"
                                    CommandParameter="U1D2"
                                    Header="  2Rows[1|2]  " />
                                <Separator Height="1" />
                                <MenuItem
                                    Command="{Binding Commands[Layout]}"
                                    CommandParameter="R3"
                                    Header="  3Rows  " />
                                <Separator Height="1" />
                                <MenuItem
                                    Command="{Binding Commands[Layout]}"
                                    CommandParameter="R2C2"
                                    Header="  2Rows2Columns  " />
                            </ContextMenu>
                        </Label.ContextMenu>
                    </Label>
                </Grid>

            </Grid>

            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition />
                    <ColumnDefinition />
                </Grid.ColumnDefinitions>

                <!--  反色  -->
                <TextBlock
                    x:Name="txtInvert"
                    Grid.Column="0"
                    Tag="0"
                    ToolTip="{x:Static res:LanguageResource.Tooltip_Invert}">
                    <TextBlock.Background>
                        <ImageBrush ImageSource="pack://application:,,,/NV.CT.UI.Controls;component/Icons/i_invert_0.png" />
                    </TextBlock.Background>
                    <i:Interaction.Triggers>
                        <i:EventTrigger EventName="MouseLeftButtonDown">
                            <i:InvokeCommandAction Command="{Binding Commands[Invert]}" />
                        </i:EventTrigger>
                    </i:Interaction.Triggers>
                </TextBlock>

            </Grid>

        </StackPanel>

        <!--  Mark标签  -->
        <Label
            Grid.Row="2"
            Margin="0,10"
            HorizontalAlignment="Stretch"
            VerticalAlignment="Center"
            HorizontalContentAlignment="Center"
            Background="#5A5A89"
            Content="{x:Static res:LanguageResource.Content_Mark}"
            FontSize="15"
            FontWeight="Bold"
            Foreground="White"
            Opacity="0.7" />

        <!--  Mark标签对应的Icon功能图标  -->
        <StackPanel Name="spMark" Grid.Row="3">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition />
                    <ColumnDefinition />
                </Grid.ColumnDefinitions>
                <!--  测量工具  -->
                <TextBlock
                    Grid.Column="0"
                    Tag="1"
                    ToolTip="{x:Static res:LanguageResource.Tooltip_Measure}">
                    <TextBlock.Background>
                        <ImageBrush ImageSource="pack://application:,,,/NV.CT.UI.Controls;component/Icons/i_measuring_distance_0.png" />
                    </TextBlock.Background>
                    <i:Interaction.Triggers>
                        <i:EventTrigger EventName="MouseLeftButtonDown">
                            <i:InvokeCommandAction Command="{Binding Commands[Create_Length_ROI]}" />
                        </i:EventTrigger>
                    </i:Interaction.Triggers>
                </TextBlock>

                <!--  角度工具  -->
                <TextBlock
                    Grid.Column="1"
                    Tag="1"
                    ToolTip="{x:Static res:LanguageResource.ToolTip_Angle}">
                    <TextBlock.Background>
                        <ImageBrush ImageSource="pack://application:,,,/NV.CT.UI.Controls;component/Icons/i_angle_0.png" />
                    </TextBlock.Background>
                    <i:Interaction.Triggers>
                        <i:EventTrigger EventName="MouseLeftButtonDown">
                            <i:InvokeCommandAction Command="{Binding Commands[Create_Angle_ROI]}" />
                        </i:EventTrigger>
                    </i:Interaction.Triggers>
                </TextBlock>
            </Grid>

            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition />
                    <ColumnDefinition />
                </Grid.ColumnDefinitions>

                <!--  ROI画圈  -->
                <TextBlock
                    Grid.Column="0"
                    Tag="1"
                    ToolTip="{x:Static res:LanguageResource.Tooltip_CircleROI}">
                    <TextBlock.Background>
                        <ImageBrush ImageSource="pack://application:,,,/NV.CT.UI.Controls;component/Icons/i_circle_ROI_0.png" />
                    </TextBlock.Background>
                    <i:Interaction.Triggers>
                        <i:EventTrigger EventName="MouseLeftButtonDown">
                            <i:InvokeCommandAction Command="{Binding Commands[Create_Circle_ROI]}" />
                        </i:EventTrigger>
                    </i:Interaction.Triggers>
                </TextBlock>



                <!--  箭头工具  -->
                <TextBlock
                    Grid.Column="1"
                    Tag="1"
                    ToolTip="{x:Static res:LanguageResource.ToolTip_Arrow}">
                    <TextBlock.Background>
                        <ImageBrush ImageSource="pack://application:,,,/NV.CT.UI.Controls;component/Icons/i_arrow_0.png" />
                    </TextBlock.Background>
                    <i:Interaction.Triggers>
                        <i:EventTrigger EventName="MouseLeftButtonDown">
                            <i:InvokeCommandAction Command="{Binding Commands[Create_Arrow_ROI]}" />
                        </i:EventTrigger>
                    </i:Interaction.Triggers>
                </TextBlock>
            </Grid>

            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition />
                    <ColumnDefinition />
                </Grid.ColumnDefinitions>

                <!--  重新绘制  -->
                <TextBlock
                    x:Name="tbRework"
                    Grid.Column="0"
                    Tag="1"
                    ToolTip="{x:Static res:LanguageResource.ToolTip_Rework}">
                    <TextBlock.Background>
                        <ImageBrush ImageSource="pack://application:,,,/NV.CT.UI.Controls;component/Icons/i_rework_0.png" />
                    </TextBlock.Background>
                    <i:Interaction.Triggers>
                        <i:EventTrigger EventName="MouseLeftButtonDown">
                            <i:InvokeCommandAction Command="{Binding Commands[Remove_All_ROI3D]}" />
                        </i:EventTrigger>
                    </i:Interaction.Triggers>
                </TextBlock>

                <!--  revocation [不用]  -->
                <TextBlock
                    Grid.Column="1"
                    Tag="1"
                    ToolTip="{x:Static res:LanguageResource.Tooltip_Undo}"
                    Visibility="Collapsed">
                    <TextBlock.Background>
                        <ImageBrush ImageSource="pack://application:,,,/NV.CT.UI.Controls;component/Icons/i_revocation_0.png" />
                    </TextBlock.Background>
                    <i:Interaction.Triggers>
                        <i:EventTrigger EventName="MouseLeftButtonDown">
                            <i:InvokeCommandAction Command="{Binding Commands[Revocation]}" />
                        </i:EventTrigger>
                    </i:Interaction.Triggers>
                </TextBlock>

            </Grid>

        </StackPanel>


        <!--  ViewMode标签  -->
        <Label
            Grid.Row="4"
            Margin="0,10"
            HorizontalAlignment="Stretch"
            VerticalAlignment="Center"
            HorizontalContentAlignment="Center"
            Background="#5A5A89"
            Content="{x:Static res:LanguageResource.Content_ViewMode}"
            FontSize="15"
            FontWeight="Bold"
            Foreground="White"
            Opacity="0.7" />

        <!--  ViewMode标签对应的Icon功能图标  -->
        <StackPanel Name="spViewMode" Grid.Row="5">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition />
                    <ColumnDefinition />
                </Grid.ColumnDefinitions>

                <Grid
                    Grid.Column="0"
                    Style="{StaticResource ComplexGrid}"
                    ToolTip="{x:Static res:LanguageResource.Tooltip_MMPR}">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition />
                        <ColumnDefinition Width="6" />
                    </Grid.ColumnDefinitions>
                    <TextBlock x:Name="txtMMPR" Tag="0">
                        <TextBlock.Background>
                            <ImageBrush ImageSource="pack://application:,,,/NV.CT.UI.Controls;component/Icons/i_tb_MPR_0.png" />
                        </TextBlock.Background>
                        <i:Interaction.Triggers>
                            <i:EventTrigger EventName="MouseLeftButtonDown">
                                <i:InvokeCommandAction Command="{Binding Commands[MPR]}" />
                            </i:EventTrigger>
                        </i:Interaction.Triggers>
                    </TextBlock>
                    <Label
                        x:Name="labelMMPR"
                        Grid.Column="1"
                        Margin="0,0,0,7"
                        VerticalAlignment="Bottom"
                        MouseLeftButtonDown="LabelMMPR_OnMouseLeftButtonDown">
                        <Label.Content>
                            <Path
                                Width="6"
                                Height="6"
                                Fill="{StaticResource TextBoxBrush}"
                                Stretch="Fill"
                                Style="{StaticResource Down}" />
                        </Label.Content>
                        <Label.ContextMenu>
                            <ContextMenu x:Name="menuMMPR" Placement="MousePoint">
                                <MenuItem Command="{Binding Commands[MPR]}" Header=" MPR " />
                                <Separator Height="1" />
                                <MenuItem Command="{Binding Commands[MIP]}" Header=" MIP " />
                                <Separator Height="1" />
                                <MenuItem Command="{Binding Commands[MinIP]}" Header=" MinIP " />
                                <Separator Height="1" />
                                <MenuItem Command="{Binding Commands[AVG]}" Header=" AVG " />
                            </ContextMenu>
                        </Label.ContextMenu>
                    </Label>
                </Grid>

                <!--  VR  -->
                <TextBlock
                    x:Name="tbVR"
                    Grid.Column="1"
                    Tag="1"
                    ToolTip="{x:Static res:LanguageResource.Tooltip_VR}">
                    <TextBlock.Background>
                        <ImageBrush ImageSource="pack://application:,,,/NV.CT.UI.Controls;component/Icons/i_VRT_0.png" />
                    </TextBlock.Background>
                    <i:Interaction.Triggers>
                        <i:EventTrigger EventName="MouseLeftButtonDown">
                            <i:InvokeCommandAction Command="{Binding Commands[VR]}" />
                        </i:EventTrigger>
                    </i:Interaction.Triggers>
                </TextBlock>

            </Grid>

            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition />
                    <ColumnDefinition />
                </Grid.ColumnDefinitions>

                <!--  SSD  -->
                <TextBlock
                    x:Name="tbSSD"
                    Grid.Column="0"
                    Tag="1"
                    ToolTip="{x:Static res:LanguageResource.Tooltip_SSD}">
                    <TextBlock.Background>
                        <ImageBrush ImageSource="pack://application:,,,/NV.CT.UI.Controls;component/Icons/i_MPRMP_0.png" />
                    </TextBlock.Background>
                    <i:Interaction.Triggers>
                        <i:EventTrigger EventName="MouseLeftButtonDown">
                            <i:InvokeCommandAction Command="{Binding Commands[SSD]}" />
                        </i:EventTrigger>
                    </i:Interaction.Triggers>
                </TextBlock>


                <!--  CPR  -->
                <TextBlock
                    x:Name="tbCPR"
                    Grid.Column="1"
                    Tag="1"
                    ToolTip="{x:Static res:LanguageResource.Tooltip_CPR}">
                    <TextBlock.Background>
                        <ImageBrush ImageSource="pack://application:,,,/NV.CT.UI.Controls;component/Icons/i_surface_0.png" />
                    </TextBlock.Background>
                    <i:Interaction.Triggers>
                        <i:EventTrigger EventName="MouseLeftButtonDown">
                            <i:InvokeCommandAction Command="{Binding Commands[CPR]}" />
                        </i:EventTrigger>
                    </i:Interaction.Triggers>
                </TextBlock>


            </Grid>


            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition />
                    <ColumnDefinition />
                </Grid.ColumnDefinitions>


                <!--  VRT reset  -->
                <TextBlock
                    x:Name="tbVRTReset"
                    Grid.Column="0"
                    Tag="1"
                    ToolTip="{x:Static res:LanguageResource.Tooltip_VRTReset}">
                    <TextBlock.Background>
                        <ImageBrush ImageSource="pack://application:,,,/NV.CT.UI.Controls;component/Icons/i_reset_preset_0.png" />
                    </TextBlock.Background>
                    <i:Interaction.Triggers>
                        <i:EventTrigger EventName="MouseLeftButtonDown">
                            <i:InvokeCommandAction Command="{Binding Commands[VRTReset]}" />
                        </i:EventTrigger>
                    </i:Interaction.Triggers>
                </TextBlock>

                <!--  VRTColor  -->
                <TextBlock
                    Grid.Column="1"
                    Tag="1"
                    ToolTip="{x:Static res:LanguageResource.Tooltip_VRTColor}"
                    Visibility="Collapsed">
                    <TextBlock.Background>
                        <ImageBrush ImageSource="pack://application:,,,/NV.CT.UI.Controls;component/Icons/i_VRT_colour_0.png" />
                    </TextBlock.Background>
                </TextBlock>
            </Grid>





        </StackPanel>


        <!--  Advanced标签  -->
        <Label
            Grid.Row="6"
            Margin="0,10"
            HorizontalAlignment="Stretch"
            VerticalAlignment="Center"
            HorizontalContentAlignment="Center"
            Background="#5A5A89"
            Content="{x:Static res:LanguageResource.Content_Advance}"
            FontSize="15"
            FontWeight="Bold"
            Foreground="White"
            Opacity="0.7" />

        <!--  Advanced标签对应的Icon功能图标  -->
        <StackPanel Name="spAdvance" Grid.Row="7">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition />
                    <ColumnDefinition />
                </Grid.ColumnDefinitions>


                <!--  Screen shot  -->
                <TextBlock
                    x:Name="txtScreenshot"
                    Grid.Column="0"
                    Tag="1"
                    ToolTip="{x:Static res:LanguageResource.Tooltip_ScreenShot}">
                    <TextBlock.Background>
                        <ImageBrush ImageSource="pack://application:,,,/NV.CT.UI.Controls;component/Icons/ScreenShot_0.png" />
                    </TextBlock.Background>
                    <i:Interaction.Triggers>
                        <i:EventTrigger EventName="MouseLeftButtonDown">
                            <i:InvokeCommandAction Command="{Binding Commands[Screenshot]}" />
                        </i:EventTrigger>
                    </i:Interaction.Triggers>
                </TextBlock>

                <!--  Clip box  -->
                <TextBlock
                    x:Name="tbClipBox"
                    Grid.Column="1"
                    IsEnabled="{Binding IsVRorSSDMode}"
                    Tag="1"
                    ToolTip="{x:Static res:LanguageResource.Tooltip_ClipBox}">
                    <TextBlock.Background>
                        <ImageBrush ImageSource="pack://application:,,,/NV.CT.UI.Controls;component/Icons/i_cut_frame_0.png" />
                    </TextBlock.Background>
                    <i:Interaction.Triggers>
                        <i:EventTrigger EventName="MouseLeftButtonDown">
                            <i:InvokeCommandAction Command="{Binding Commands[ClipBox]}" />
                        </i:EventTrigger>
                    </i:Interaction.Triggers>
                </TextBlock>



            </Grid>

            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition />
                    <ColumnDefinition />
                </Grid.ColumnDefinitions>

                <!--  cut  -->
                <Grid
                    x:Name="gridCut"
                    Grid.Column="0"
                    IsEnabled="{Binding IsVRorSSDMode}"
                    Style="{StaticResource ComplexGrid}"
                    ToolTip="{x:Static res:LanguageResource.Tooltip_Cut}">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition />
                        <ColumnDefinition Width="6" />
                    </Grid.ColumnDefinitions>
                    <TextBlock x:Name="txtCut" Tag="0">
                        <TextBlock.Background>
                            <ImageBrush ImageSource="pack://application:,,,/NV.CT.UI.Controls;component/Icons/i_head_re_b_0.png" />
                        </TextBlock.Background>
                        <i:Interaction.Triggers>
                            <i:EventTrigger EventName="MouseLeftButtonDown">
                                <i:InvokeCommandAction Command="{Binding Commands[CutMode]}" />
                            </i:EventTrigger>
                        </i:Interaction.Triggers>
                    </TextBlock>
                    <Label
                        x:Name="labelCut"
                        Grid.Column="1"
                        Margin="0,0,0,7"
                        VerticalAlignment="Bottom"
                        MouseLeftButtonDown="LabelCut_OnMouseLeftButtonDown">
                        <Label.Content>
                            <Path
                                Width="6"
                                Height="6"
                                Fill="{StaticResource TextBoxBrush}"
                                Stretch="Fill"
                                Style="{StaticResource Down}" />
                        </Label.Content>
                        <Label.ContextMenu>
                            <ContextMenu x:Name="menuCut" Placement="MousePoint">
                                <MenuItem Command="{Binding Commands[SelectedCut]}" Header=" Selected Cut " />
                                <Separator Height="1" />
                                <MenuItem Command="{Binding Commands[UnselectedCut]}" Header=" Unselected Cut " />
                                <Separator Height="1" />
                                <MenuItem Command="{Binding Commands[UndoVolumeCut]}" Header=" Undo " />
                                <Separator Height="1" />
                                <MenuItem Command="{Binding Commands[RedoVolumeCut]}" Header=" Redo " />
                            </ContextMenu>
                        </Label.ContextMenu>
                    </Label>
                </Grid>

                <!--  3D preset  -->
                <Grid
                    x:Name="gridPreset"
                    Grid.Column="1"
                    IsEnabled="{Binding IsVRorSSDMode}"
                    Style="{StaticResource ComplexGrid}"
                    ToolTip="{x:Static res:LanguageResource.Tooltip_Preset}">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition />
                        <ColumnDefinition Width="6" />
                    </Grid.ColumnDefinitions>
                    <TextBlock x:Name="txtPreset" Tag="0">
                        <TextBlock.Background>
                            <ImageBrush ImageSource="pack://application:,,,/NV.CT.UI.Controls;component/Icons/i_style_0.png" />
                        </TextBlock.Background>
                        <i:Interaction.Triggers>
                            <i:EventTrigger EventName="MouseLeftButtonDown">
                                <i:InvokeCommandAction Command="{Binding Commands[AdvancePreset]}" />
                            </i:EventTrigger>
                        </i:Interaction.Triggers>
                    </TextBlock>
                    <Label
                        x:Name="labelPreset"
                        Grid.Column="1"
                        Margin="0,0,0,7"
                        VerticalAlignment="Bottom"
                        MouseLeftButtonDown="LabelPreset_OnMouseLeftButtonDown">
                        <Label.Content>
                            <Path
                                Width="6"
                                Height="6"
                                Fill="{StaticResource TextBoxBrush}"
                                Stretch="Fill"
                                Style="{StaticResource Down}" />
                        </Label.Content>
                        <Label.ContextMenu>
                            <ContextMenu x:Name="menuPreset" Placement="MousePoint">
                                <MenuItem
                                    Command="{Binding Commands[AdvancePreset]}"
                                    CommandParameter="Airways"
                                    Header=" Airways " />
                                <Separator Height="1" />
                                <MenuItem
                                    Command="{Binding Commands[AdvancePreset]}"
                                    CommandParameter="X-ray"
                                    Header=" X-ray " />
                                <Separator Height="1" />
                                <MenuItem
                                    Command="{Binding Commands[AdvancePreset]}"
                                    CommandParameter="Muscle"
                                    Header=" Muscle " />
                                <Separator Height="1" />
                                <MenuItem
                                    Command="{Binding Commands[AdvancePreset]}"
                                    CommandParameter="MIP"
                                    Header=" MIP " />
                                <Separator Height="1" />
                                <MenuItem
                                    Command="{Binding Commands[AdvancePreset]}"
                                    CommandParameter="Air"
                                    Header=" Air " />
                                <Separator Height="1" />
                                <MenuItem
                                    Command="{Binding Commands[AdvancePreset]}"
                                    CommandParameter="Default"
                                    Header=" Default " />
                            </ContextMenu>
                        </Label.ContextMenu>
                    </Label>
                </Grid>

            </Grid>

            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition />
                    <ColumnDefinition />
                </Grid.ColumnDefinitions>

                <TextBlock
                    x:Name="tbRemoveTable"
                    Grid.Column="0"
                    IsEnabled="{Binding IsVRorSSDMode}"
                    Tag="1"
                    ToolTip="Automatic table removal">
                    <TextBlock.Background>
                        <ImageBrush ImageSource="pack://application:,,,/NV.CT.UI.Controls;component/Icons/i_remove_tab_0.png" />
                    </TextBlock.Background>
                    <i:Interaction.Triggers>
                        <i:EventTrigger EventName="MouseLeftButtonDown">
                            <i:InvokeCommandAction Command="{Binding Commands[RemoveTable]}" />
                        </i:EventTrigger>
                    </i:Interaction.Triggers>
                </TextBlock>
                <ProgressBar
                    x:Name="pbProgressBar"
                    Grid.Row="1"
                    Grid.Column="0"
                    Width="30"
                    Height="1"
                    Margin="0,25,1,0"
                    Maximum="1"
                    Minimum="0"
                    Style="{StaticResource SimpleProgressBar}"
                    Visibility="{Binding ProgressBarVisibility, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                    Value="{Binding Progress, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                <!--  Automatic bone removal  -->
                <TextBlock
                    Grid.Column="1"
                    Tag="1"
                    ToolTip="Automatic bone removal"
                    Visibility="Hidden">
                    <TextBlock.Background>
                        <ImageBrush ImageSource="pack://application:,,,/NV.CT.UI.Controls;component/Icons/i_auto_rem_bone_0.png" />
                    </TextBlock.Background>
                </TextBlock>
            </Grid>

        </StackPanel>

        <!--  Batch标签  -->
        <Label
            Grid.Row="8"
            Margin="0,10"
            HorizontalAlignment="Stretch"
            VerticalAlignment="Center"
            HorizontalContentAlignment="Center"
            Background="#5A5A89"
            Content="{x:Static res:LanguageResource.Content_Batch}"
            FontSize="15"
            FontWeight="Bold"
            Foreground="White"
            Opacity="0.7" />

        <!--  Batch标签对应的Icon功能图标  -->
        <StackPanel Name="spBatch" Grid.Row="9">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition />
                    <ColumnDefinition />
                </Grid.ColumnDefinitions>


                <!--  MPR reconstruction  -->
                <TextBlock
                    x:Name="tbMPR"
                    Grid.Column="0"
                    Tag="1"
                    ToolTip="{x:Static res:LanguageResource.ToolTip_BatchMPR}">
                    <TextBlock.Background>
                        <ImageBrush ImageSource="pack://application:,,,/NV.CT.UI.Controls;component/Icons/i_BatchMPR_0.png" />
                    </TextBlock.Background>
                    <i:Interaction.Triggers>
                        <i:EventTrigger EventName="MouseLeftButtonDown">
                            <i:InvokeCommandAction Command="{Binding Commands[MPRRecon]}" />
                        </i:EventTrigger>
                    </i:Interaction.Triggers>
                </TextBlock>

                <!--  Multi angle  -->
                <TextBlock
                    x:Name="tbMultiAngle"
                    Grid.Column="1"
                    Tag="1"
                    ToolTip="{x:Static res:LanguageResource.ToolTip_BatchAngle}">
                    <TextBlock.Background>
                        <ImageBrush ImageSource="pack://application:,,,/NV.CT.UI.Controls;component/Icons/i_BatchAngle_0.png" />
                    </TextBlock.Background>
                    <i:Interaction.Triggers>
                        <i:EventTrigger EventName="MouseLeftButtonDown">
                            <i:InvokeCommandAction Command="{Binding Commands[MultiAngleRecon]}" />
                        </i:EventTrigger>
                    </i:Interaction.Triggers>
                </TextBlock>



            </Grid>

            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition />
                    <ColumnDefinition />
                </Grid.ColumnDefinitions>

                <!--  Free Slice  -->
                <Grid
                    x:Name="gridSlice"
                    Grid.Column="0"
                    Style="{StaticResource ComplexGrid}"
                    ToolTip="{x:Static res:LanguageResource.ToolTip_BatchSlice}">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition />
                        <ColumnDefinition Width="6" />
                    </Grid.ColumnDefinitions>
                    <TextBlock x:Name="tbSlice" Tag="0">
                        <TextBlock.Background>
                            <ImageBrush ImageSource="pack://application:,,,/NV.CT.UI.Controls;component/Icons/i_Slice_0.png" />
                        </TextBlock.Background>
                        <i:Interaction.Triggers>
                            <i:EventTrigger EventName="MouseLeftButtonDown">
                                <i:InvokeCommandAction Command="{Binding Commands[FreeSliceRecon]}" />
                            </i:EventTrigger>
                        </i:Interaction.Triggers>
                    </TextBlock>
                    <Label
                        x:Name="labelSlice"
                        Grid.Column="1"
                        Margin="0,0,0,7"
                        VerticalAlignment="Bottom">
                        <Label.Content>
                            <Path
                                Width="6"
                                Height="6"
                                Fill="{StaticResource TextBoxBrush}"
                                Stretch="Fill"
                                Style="{StaticResource Down}" />
                        </Label.Content>
                        <Label.ContextMenu>
                            <ContextMenu x:Name="menuSlice" Placement="MousePoint">
                                <MenuItem Header=" Linear slice " />
                                <Separator Height="1" />
                                <MenuItem Header="Curved slice  " />
                            </ContextMenu>
                        </Label.ContextMenu>
                    </Label>
                </Grid>

                <!--  RGB Data  -->
                <TextBlock
                    x:Name="tbRGBData"
                    Grid.Column="1"
                    Tag="1"
                    ToolTip="{x:Static res:LanguageResource.ToolTip_BatchRGB}">
                    <TextBlock.Background>
                        <ImageBrush ImageSource="pack://application:,,,/NV.CT.UI.Controls;component/Icons/i_RGB_0.png" />
                    </TextBlock.Background>
                    <i:Interaction.Triggers>
                        <i:EventTrigger EventName="MouseLeftButtonDown">
                            <i:InvokeCommandAction Command="{Binding Commands[RGBDataRecon]}" />
                        </i:EventTrigger>
                    </i:Interaction.Triggers>
                </TextBlock>

            </Grid>


        </StackPanel>

    </Grid>
</UserControl>
