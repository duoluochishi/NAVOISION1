<Window x:Class="NV.CT.PatientManagement.View.English.StudyListFilterWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:i="http://schemas.microsoft.com/xaml/behaviors"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
        xmlns:md="clr-namespace:MaterialDesignThemes.Wpf.Controls.MarkableTextBox;assembly=MaterialDesignThemes.Wpf"
        xmlns:res="clr-namespace:NV.CT.Language;assembly=NV.CT.Language"
        xmlns:local="clr-namespace:NV.CT.PatientManagement.View.English" 
        xmlns:converter="clr-namespace:NV.CT.UI.Controls.Converter;assembly=NV.CT.UI.Controls"
        mc:Ignorable="d"
        Background="Transparent" ResizeMode="NoResize" AllowsTransparency="True" WindowStyle="None"
        SizeToContent="Height"
        Height="auto" Width="800">
    <Window.Resources>
        <BooleanToVisibilityConverter x:Key="booleanToVisibilityConverter" />
        <converter:BooleanToInverseBooleanConverter x:Key="BooleanToInverseBooleanConverter"/>
        <converter:BoolToStyleConverter x:Key="boolToStyleConverter" />
    </Window.Resources>
    <Border CornerRadius="10" Style="{StaticResource WindowsBorder}">
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="35" />
                <RowDefinition Height="auto" />
                <RowDefinition Height="50" />
            </Grid.RowDefinitions>
            <Border Style="{StaticResource WindowContentBorder}" />
            <Grid Grid.Row="0">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition />
                    <ColumnDefinition />
                </Grid.ColumnDefinitions>
                <TextBlock Style="{StaticResource TileTextBlock}" Text="{x:Static res:LanguageResource.Content_Filter}" />
                <Button Grid.Column="1" Style="{StaticResource TileCloseButtonStyle}" 
                        ToolTip="{x:Static res:LanguageResource.Content_Close}"
                        Command="{Binding  Commands[CloseCommand]}" 
                        CommandParameter="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType=Window}}">
                    <Path Style="{StaticResource TileClosePathStyle}" />
                </Button>
            </Grid>
            <Grid Grid.Row="1">
                <Border BorderBrush="#3b3b5f" BorderThickness="0" Background="#14142B" CornerRadius="10" Margin="4,4,4,0">
                    <Grid>
                        <Grid.RowDefinitions>
                            <!--space-->
                            <RowDefinition Height="10"/>
                            <!--Date-->
                            <RowDefinition Height="26"/> 
                            <RowDefinition Height="90"/>
                            <!--space-->
                            <RowDefinition Height="10"/>
                            <!--Status-->
                            <RowDefinition Height="26"/>
                            <RowDefinition Height="auto"/>
                            <!--space-->
                            <RowDefinition Height="10"/>
                            <!--Other-->
                            <RowDefinition Height="26"/>
                            <RowDefinition Height="auto"/>
                            <!--space-->
                            <RowDefinition Height="10"/>
                            <!--Sort-->
                            <RowDefinition Height="26"/>
                            <RowDefinition Height="40"/>
                        </Grid.RowDefinitions>
                        <Grid Grid.Row="1" HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
                            <TextBlock x:Name="lblDate" Grid.Row="0" Margin="10,0,0,0" Text="{x:Static res:LanguageResource.Content_Date}"
                               HorizontalAlignment="Left" VerticalAlignment="Top" FontSize="14" Style="{StaticResource SectionTitleTextBlock}" />
                            <Rectangle Width="{Binding ElementName=lblDate,Path=ActualWidth}"
                               Style="{StaticResource SectionTitleUnderlineRectangle}" Margin="10,0,0,0"/>
                        </Grid>
                        <Grid Grid.Row="2" >
                            <Grid.RowDefinitions>
                                <RowDefinition Height="40"></RowDefinition>
                                <RowDefinition Height="40"></RowDefinition>
                            </Grid.RowDefinitions>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="120"></ColumnDefinition>
                                <ColumnDefinition Width="300"></ColumnDefinition>
                                <!-- split empty column -->
                                <ColumnDefinition Width="30"></ColumnDefinition>
                                <ColumnDefinition Width="220"></ColumnDefinition>
                                <ColumnDefinition></ColumnDefinition>
                            </Grid.ColumnDefinitions>
                            <WrapPanel Grid.Row="0" Grid.Column="0" HorizontalAlignment="Left" VerticalAlignment="Center">
                                <TextBlock Text="{x:Static res:LanguageResource.Content_DateRange}" Margin="10,0,0,0"  Style="{StaticResource InputLabelTextBlock}" />
                            </WrapPanel>
                            <ComboBox Grid.Row="0" Grid.Column="1" HorizontalAlignment="Left" VerticalContentAlignment="Center" Style="{StaticResource MaterialDesignOutlinedComboBox}" Width="200"
                                      ItemsSource="{Binding DateRangeTypes}" SelectedItem="{Binding FilterConfig.StudyDateRangeType}">
                            </ComboBox>
                            <StackPanel Grid.Row="1" Grid.Column="1" Grid.ColumnSpan="3" Orientation="Horizontal" IsEnabled="{Binding FilterConfig.IsStudyDateEnabled}">
                                <DatePicker HorizontalAlignment="Left" VerticalContentAlignment="Center" Style="{StaticResource MaterialDesignOutlinedDatePicker}" Width="200">
                                    <DatePicker.SelectedDate>
                                        <Binding Path="FilterConfig.StudyDateRangeBeginDate" ValidatesOnDataErrors="True" />
                                    </DatePicker.SelectedDate>
                                </DatePicker>
                                <TextBlock Text="~" Margin="20,0,20,0" Style="{StaticResource InputLabelTextBlock}" />
                                <DatePicker HorizontalAlignment="Left" VerticalContentAlignment="Center" Style="{StaticResource MaterialDesignOutlinedDatePicker}" Width="200">
                                    <DatePicker.SelectedDate>
                                        <Binding Path="FilterConfig.StudyDateRangeEndDate" ValidatesOnDataErrors="True" />
                                    </DatePicker.SelectedDate>
                                </DatePicker>
                                <Button x:Name="btnClearStudyDate" Width="60" Height="34" Margin="20,0,0,0" HorizontalAlignment="Stretch" VerticalAlignment="Stretch"
                                       Content="{x:Static res:LanguageResource.Content_Clear}" Command="{Binding Commands[ClearDateTimeCommand]}" CommandParameter="study">
                                </Button>
                            </StackPanel>
                        </Grid>
                        <Grid Grid.Row="4">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="150" />
                                <ColumnDefinition  />
                            </Grid.ColumnDefinitions>
                            <Button Grid.Row="0" Grid.Column="0" Width="30" Height="30" Margin="0,-6,0,0" HorizontalAlignment="Stretch" VerticalAlignment="Top"
                                    BorderThickness="0" Cursor="Hand" BorderBrush="Transparent" Background="Transparent" ToolTip="{Binding ToolTipStatusSection}"
                                    Command="{Binding Commands[ExpandCommand]}" CommandParameter="status">
                                <Path Fill="White" Stretch="Uniform"
                                      Style="{Binding IsStatusSectionExpanded, Converter={StaticResource boolToStyleConverter}, ConverterParameter='SingleArrowDown:SingleArrowRight'}" >
                                </Path>
                            </Button>
                            <TextBlock x:Name="lblStatus" Grid.Row="0" Grid.Column="0" Margin="10,0,0,0" Text="{x:Static res:LanguageResource.Content_Status}"
                               HorizontalAlignment="Left" VerticalAlignment="Top" FontSize="14" Style="{StaticResource SectionTitleTextBlock}" />
                            <Rectangle Grid.Row="0" Grid.Column="0" Width="{Binding ElementName=lblStatus,Path=ActualWidth}" Style="{StaticResource SectionTitleUnderlineRectangle}" Margin="10,0,0,0"/>
                        </Grid>
                        <Grid Grid.Row="5" Visibility="{Binding IsStatusSectionExpanded, Converter={StaticResource booleanToVisibilityConverter}}">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="40"></RowDefinition>
                                <RowDefinition Height="40"></RowDefinition>
                                <RowDefinition Height="40"></RowDefinition>
                                <RowDefinition Height="40"></RowDefinition>
                                <RowDefinition Height="40"></RowDefinition>
                            </Grid.RowDefinitions>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="120"></ColumnDefinition>
                                <ColumnDefinition Width="300"></ColumnDefinition>
                                <!-- split empty column -->
                                <ColumnDefinition Width="30"></ColumnDefinition>
                                <ColumnDefinition Width="220"></ColumnDefinition>
                                <ColumnDefinition></ColumnDefinition>
                            </Grid.ColumnDefinitions>
                            <WrapPanel Grid.Row="0" Grid.Column="0" HorizontalAlignment="Left" VerticalAlignment="Center">
                                <TextBlock Text="{x:Static res:LanguageResource.Content_StudyStatus}" Margin="10,0,0,0"  Style="{StaticResource InputLabelTextBlock}" />
                            </WrapPanel>
                            <StackPanel Grid.Row="0" Grid.Column="1" Grid.ColumnSpan="3" Orientation="Horizontal" >
                                <CheckBox Content="{x:Static res:LanguageResource.Content_InProgress}" Margin="0,0,0,0" Width="110" 
                                          IsChecked="{Binding FilterConfig.IsInProgressCheckedOfStudyStatus}" />
                                <CheckBox Content="{x:Static res:LanguageResource.Content_Finished}" Margin="30,0,0,0" Width="120" 
                                          IsChecked="{Binding FilterConfig.IsFinishedCheckedOfStudyStatus}" />
                                <CheckBox Content="{x:Static res:LanguageResource.Content_Abnormal}" Margin="30,0,0,0" Width="120" 
                                          IsChecked="{Binding FilterConfig.IsAbnormalCheckedOfStudyStatus}" />
                            </StackPanel>
                            <WrapPanel Grid.Row="1" Grid.Column="0" HorizontalAlignment="Left" VerticalAlignment="Center">
                                <TextBlock Text="{x:Static res:LanguageResource.Content_ArchiveStatus}" Margin="10,0,0,0"  Style="{StaticResource InputLabelTextBlock}" />
                            </WrapPanel>
                            <StackPanel Grid.Row="1" Grid.Column="1" Grid.ColumnSpan="3" Orientation="Horizontal" >
                                <CheckBox Content="{x:Static res:LanguageResource.Content_NotYet}" Margin="0,0,0,0" Width="110" 
                                          IsChecked="{Binding FilterConfig.IsNotYetCheckedOfArchiveStatus}" />
                                <CheckBox Content="{x:Static res:LanguageResource.Content_PartlyFinished}" Margin="30,0,0,0" Width="120" 
                                          IsChecked="{Binding FilterConfig.IsPartlyFinishedCheckedOfArchiveStatus}" />
                                <CheckBox Content="{x:Static res:LanguageResource.Content_Finished}" Margin="30,0,0,0" Width="120" 
                                          IsChecked="{Binding FilterConfig.IsFinishedCheckedOfArchiveStatus}" />
                                <CheckBox Content="{x:Static res:LanguageResource.Content_Failed}" Margin="30,0,0,0" Width="120" 
                                          IsChecked="{Binding FilterConfig.IsFailedCheckedOfArchiveStatus}" />
                            </StackPanel>
                            <WrapPanel Grid.Row="2" Grid.Column="0" HorizontalAlignment="Left" VerticalAlignment="Center">
                                <TextBlock Text="{x:Static res:LanguageResource.Content_PrintStatus}" Margin="10,0,0,0"  Style="{StaticResource InputLabelTextBlock}" />
                            </WrapPanel>
                            <StackPanel Grid.Row="2" Grid.Column="1" Grid.ColumnSpan="3" Orientation="Horizontal" >
                                <CheckBox Content="{x:Static res:LanguageResource.Content_NotYet}" Margin="0,0,0,0" Width="110" 
                                          IsChecked="{Binding FilterConfig.IsNotYetCheckedOfPrintStatus}" />
                                <CheckBox Content="{x:Static res:LanguageResource.Content_Finished}" Margin="30,0,0,0" Width="120" 
                                          IsChecked="{Binding FilterConfig.IsFinishedCheckedOfPrintStatus}" />
                                <CheckBox Content="{x:Static res:LanguageResource.Content_Failed}" Margin="30,0,0,0" Width="120" 
                                          IsChecked="{Binding FilterConfig.IsFailedCheckedOfPrintStatus}" />
                            </StackPanel>
                            <WrapPanel Grid.Row="3" Grid.Column="0" HorizontalAlignment="Left" VerticalAlignment="Center">
                                <TextBlock Text="{x:Static res:LanguageResource.Content_Correction}" Margin="10,0,0,0"  Style="{StaticResource InputLabelTextBlock}" />
                            </WrapPanel>
                            <StackPanel Grid.Row="3" Grid.Column="1" Grid.ColumnSpan="3" Orientation="Horizontal" >
                                <CheckBox Content="{x:Static res:LanguageResource.Content_Corrected}" Margin="0,0,0,0" Width="110" 
                                          IsChecked="{Binding FilterConfig.IsCorrectedChecked}" />
                                <CheckBox Content="{x:Static res:LanguageResource.Content_Uncorrected}" Margin="30,0,0,0" Width="110" 
                                          IsChecked="{Binding FilterConfig.IsUncorrectedChecked}" />
                            </StackPanel>
                            <WrapPanel Grid.Row="4" Grid.Column="0" HorizontalAlignment="Left" VerticalAlignment="Center">
                                <TextBlock Text="{x:Static res:LanguageResource.Content_LockStatus}" Margin="10,0,0,0"  Style="{StaticResource InputLabelTextBlock}" />
                            </WrapPanel>
                            <StackPanel Grid.Row="4" Grid.Column="1" Grid.ColumnSpan="3" Orientation="Horizontal" >
                                <CheckBox Content="{x:Static res:LanguageResource.Content_Locked}" Margin="0,0,0,0" Width="110" 
                                          IsChecked="{Binding FilterConfig.IsLockedChecked}" />
                                <CheckBox Content="{x:Static res:LanguageResource.Content_Unlocked}" Margin="30,0,0,0" Width="110" 
                                          IsChecked="{Binding FilterConfig.IsUnlockedChecked}" />
                            </StackPanel>
                        </Grid>
                        <Grid Grid.Row="7" HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="150" />
                                <ColumnDefinition  />
                            </Grid.ColumnDefinitions>
                            <Button Grid.Row="0" Grid.Column="0" Width="30" Height="30" Margin="0,-6,0,0" HorizontalAlignment="Stretch" VerticalAlignment="Top"
                                    BorderThickness="0" Cursor="Hand" BorderBrush="Transparent" Background="Transparent" ToolTip="{Binding ToolTipOtherSection}"
                                    Command="{Binding Commands[ExpandCommand]}" CommandParameter="other">
                                <Path Fill="White" Stretch="Uniform"
                                      Style="{Binding IsOtherSectionExpanded, Converter={StaticResource boolToStyleConverter}, ConverterParameter='SingleArrowDown:SingleArrowRight'}" >
                                </Path>
                            </Button>
                            <TextBlock x:Name="lblOther" Grid.Row="0" Margin="10,0,0,0" Text="{x:Static res:LanguageResource.Content_Other}"
                                       HorizontalAlignment="Left" VerticalAlignment="Top" FontSize="14" Style="{StaticResource SectionTitleTextBlock}" />
                            <Rectangle Width="{Binding ElementName=lblOther,Path=ActualWidth}"
                               Style="{StaticResource SectionTitleUnderlineRectangle}" Margin="10,0,0,0"/>
                        </Grid>
                        <Grid Grid.Row="8" Visibility="{Binding IsOtherSectionExpanded, Converter={StaticResource booleanToVisibilityConverter}}" >
                            <Grid.RowDefinitions>
                                <RowDefinition Height="40"></RowDefinition>
                                <RowDefinition Height="40"></RowDefinition>
                                <RowDefinition Height="40"></RowDefinition>
                            </Grid.RowDefinitions>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="120"></ColumnDefinition>
                                <ColumnDefinition Width="300"></ColumnDefinition>
                                <!-- split empty column -->
                                <ColumnDefinition Width="30"></ColumnDefinition>
                                <ColumnDefinition Width="220"></ColumnDefinition>
                                <ColumnDefinition></ColumnDefinition>
                            </Grid.ColumnDefinitions>
                            <WrapPanel Grid.Row="0" Grid.Column="0" HorizontalAlignment="Left" VerticalAlignment="Center">
                                <TextBlock Text="{x:Static res:LanguageResource.Content_Sex}" Margin="10,0,0,0"  Style="{StaticResource InputLabelTextBlock}" />
                            </WrapPanel>
                            <StackPanel Grid.Row="0" Grid.Column="1" Grid.ColumnSpan="3" Orientation="Horizontal" >
                                <CheckBox Content="{x:Static res:LanguageResource.Content_Male}" Margin="0,0,0,0" Width="110" 
                                          IsChecked="{Binding FilterConfig.IsMaleChecked}" />
                                <CheckBox Content="{x:Static res:LanguageResource.Content_Female}" Margin="30,0,0,0" Width="120" 
                                          IsChecked="{Binding FilterConfig.IsFemaleChecked}" />
                                <CheckBox Content="{x:Static res:LanguageResource.Content_Other}" Margin="30,0,0,0" Width="120" 
                                          IsChecked="{Binding FilterConfig.IsOtherChecked}" />
                            </StackPanel>
                            <WrapPanel Grid.Row="1" Grid.Column="0" HorizontalAlignment="Left" VerticalAlignment="Center">
                                <TextBlock Text="{x:Static res:LanguageResource.Content_PatientType}" Margin="10,0,0,0"  Style="{StaticResource InputLabelTextBlock}" />
                            </WrapPanel>
                            <StackPanel Grid.Row="1" Grid.Column="1" Grid.ColumnSpan="3" Orientation="Horizontal" >
                                <CheckBox Content="{x:Static res:LanguageResource.Content_Local}" Margin="0,0,0,0" Width="110" 
                                          IsChecked="{Binding FilterConfig.IsLocalChecked}" />
                                <CheckBox Content="{x:Static res:LanguageResource.Content_PreRegistration}" Margin="30,0,0,0" Width="120" 
                                          IsChecked="{Binding FilterConfig.IsPreRegChecked}" />
                                <CheckBox Content="{x:Static res:LanguageResource.Content_Emergency}" Margin="30,0,0,0" Width="120" 
                                          IsChecked="{Binding FilterConfig.IsEmergencyChecked}" />
                            </StackPanel>
                            <WrapPanel Grid.Row="2" Grid.Column="0" HorizontalAlignment="Left" VerticalAlignment="Center">
                                <TextBlock Text="{x:Static res:LanguageResource.Content_BirthdayRange}" Margin="10,0,0,0"  Style="{StaticResource InputLabelTextBlock}" />
                            </WrapPanel>
                            <StackPanel Grid.Row="2" Grid.Column="1" Grid.ColumnSpan="3" Orientation="Horizontal" >
                                <DatePicker HorizontalAlignment="Left" VerticalContentAlignment="Center" Style="{StaticResource MaterialDesignOutlinedDatePicker}" Width="200">
                                    <DatePicker.SelectedDate>
                                        <Binding Path="FilterConfig.BirthdayRangeBeginDate" Mode="TwoWay" ValidatesOnDataErrors="True" />
                                    </DatePicker.SelectedDate>
                                </DatePicker>
                                <TextBlock Text="~" Margin="20,0,20,0"  Style="{StaticResource InputLabelTextBlock}" />
                                <DatePicker HorizontalAlignment="Left" VerticalContentAlignment="Center" Style="{StaticResource MaterialDesignOutlinedDatePicker}" Width="200">
                                    <DatePicker.SelectedDate>
                                        <Binding Path="FilterConfig.BirthdayRangeEndDate" Mode="TwoWay" ValidatesOnDataErrors="True" />
                                    </DatePicker.SelectedDate>
                                </DatePicker>
                                <Button x:Name="btnClearBirthdayDate" Width="60" Height="34" Margin="20,0,0,0" HorizontalAlignment="Stretch" VerticalAlignment="Stretch"
                                       Content="{x:Static res:LanguageResource.Content_Clear}" Command="{Binding Commands[ClearDateTimeCommand]}" CommandParameter="birthday">
                                </Button>
                            </StackPanel>                            
                        </Grid>
                        <Grid Grid.Row="10" HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
                            <TextBlock x:Name="lblSort" Grid.Row="0" Margin="10,0,0,0" Text="{x:Static res:LanguageResource.Content_Sort}"
                                       HorizontalAlignment="Left" VerticalAlignment="Top" FontSize="14" Style="{StaticResource SectionTitleTextBlock}" />
                            <Rectangle Width="{Binding ElementName=lblSort,Path=ActualWidth}" Style="{StaticResource SectionTitleUnderlineRectangle}" Margin="10,0,0,0"/>
                        </Grid>
                        <Grid Grid.Row="11" >
                            <Grid.RowDefinitions>
                                <RowDefinition Height="40"></RowDefinition>
                                <RowDefinition Height="40"></RowDefinition>
                            </Grid.RowDefinitions>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="120"></ColumnDefinition>
                                <ColumnDefinition Width="300"></ColumnDefinition>
                                <!-- split empty column -->
                                <ColumnDefinition Width="30"></ColumnDefinition>
                                <ColumnDefinition Width="220"></ColumnDefinition>
                                <ColumnDefinition></ColumnDefinition>
                            </Grid.ColumnDefinitions>
                            <WrapPanel Grid.Row="0" Grid.Column="0" HorizontalAlignment="Left" VerticalAlignment="Center">
                                <TextBlock Text="{x:Static res:LanguageResource.Content_SortedBy}" Margin="10,0,0,0" Style="{StaticResource InputLabelTextBlock}" />
                            </WrapPanel>
                            <StackPanel Grid.Row="0" Grid.Column="1" Grid.ColumnSpan="3" Orientation="Horizontal" >
                                <ComboBox HorizontalAlignment="Left" VerticalContentAlignment="Center" Style="{StaticResource MaterialDesignOutlinedComboBox}" Width="200"
                                      ItemsSource="{Binding SortedColumnsList}" SelectedItem="{Binding FilterConfig.SortedColumnName}">
                                </ComboBox>
                                <RadioButton GroupName="rdoSortedColumn" Content="{x:Static res:LanguageResource.Content_Ascending}" Margin="20,0,0,0" Width="100" 
                                             IsChecked="{Binding FilterConfig.IsAscendingSort}" />
                                <RadioButton GroupName="rdoSortedColumn" Content="{x:Static res:LanguageResource.Content_Descending}" Margin="10,0,0,0" Width="110" 
                                             IsChecked="{Binding FilterConfig.IsAscendingSort, Converter={StaticResource BooleanToInverseBooleanConverter}}" />
                            </StackPanel>
                        </Grid>
                    </Grid>
                </Border>
            </Grid>
            <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Right">
                <Button x:Name="btnSave"  Width="90" Height="35" Margin="0,0,20,10" HorizontalAlignment="Stretch" VerticalAlignment="Stretch"
                        Content="{x:Static res:LanguageResource.Content_Apply}" Command="{Binding Commands[SaveCommand]}">
                </Button>
                <Button x:Name="btnClose" Width="90" Height="35" Margin="0,0,20,10" HorizontalAlignment="Stretch" VerticalAlignment="Stretch"
                        Content="{x:Static res:LanguageResource.Content_Cancel}" >
                    <i:Interaction.Triggers>
                        <i:EventTrigger EventName="Click">
                            <i:InvokeCommandAction Command="{Binding Commands[CloseCommand]}" CommandParameter="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType=Window}}" />
                        </i:EventTrigger>
                    </i:Interaction.Triggers>
                </Button>
            </StackPanel>
        </Grid>
    </Border>
</Window>
