<UserControl
    x:Class="NV.CT.UI.Exam.View.BodyPositionControl"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:wpf="http://materialdesigninxaml.net/winfx/xaml/themes"   
    d:DesignHeight="200"
    d:DesignWidth="340"
    mc:Ignorable="d">
    <UserControl.Resources>
        <SolidColorBrush x:Key="ItemSelectedColor">#3A3A62</SolidColorBrush>
        <Style x:Key="TextBlockStyle" BasedOn="{StaticResource NanoTextBlockStyle}" TargetType="TextBlock">
            <Setter Property="HorizontalAlignment" Value="Left" />
            <Setter Property="VerticalAlignment" Value="Top" />
            <Setter Property="Height" Value="38" />
            <Setter Property="Margin" Value="5 0 0 0" />
            <Setter Property="TextWrapping" Value="Wrap" />
            <Setter Property="Foreground" Value="{StaticResource SExposuresIconFillBrush}" />
            <Style.Triggers>
                <Trigger Property="Tag" Value="{StaticResource TrueValue}">
                    <Setter Property="Visibility" Value="Visible" />
                </Trigger>
                <Trigger Property="Tag" Value="{StaticResource FalseValue}">
                    <Setter Property="Visibility" Value="Hidden" />
                </Trigger>
            </Style.Triggers>
        </Style>
        <Style
            x:Key="BodyPositionPopupBoxStyle" 
            BasedOn="{StaticResource MaterialDesignMultiFloatingActionPopupBox}"
            TargetType="{x:Type wpf:PopupBox}">
            <Setter Property="Foreground" Value="Transparent" />
            <Setter Property="BorderThickness" Value="0" />
            <Setter Property="BorderBrush" Value="Transparent" />
            <Setter Property="Background" Value="Transparent" />
            <Setter Property="Height" Value="200" />
            <Setter Property="Width" Value="335" />
            <Setter Property="PlacementMode" Value="RightAndAlignTopEdges" />
            <Setter Property="ToolTipService.Placement" Value="Mouse" />
        </Style>
        <Style
            x:Key="BodyPositionImageStyle"
            TargetType="{x:Type Image}">
            <Setter Property="Cursor" Value="Hand" />
            <Setter Property="Margin" Value="0" />
        </Style>
        <Style
            x:Key="BodyPositionListBoxItemStyle"
            BasedOn="{StaticResource MaterialDesignToolToggleListBoxItem}"
            TargetType="{x:Type ListBoxItem}">
            <Setter Property="Padding" Value="0" />
        </Style>
        <Style
            x:Key="BodyPositionListBoxStyle"
            BasedOn="{StaticResource MaterialDesignToolToggleListBox}"
            TargetType="{x:Type ListBox}">
            <Setter Property="Background" Value="{StaticResource MaterialDesignPaper}" />
            <Setter Property="Opacity" Value="1" />
            <Setter Property="wpf:ListBoxAssist.IsToggle" Value="False" />
        </Style>
        <Style
            x:Key="BodyPositionBorderStyle"
            TargetType="{x:Type Border}">
            <Setter Property="Background" Value="Transparent" />
            <Setter Property="Width" Value="130" />
            <Setter Property="Height" Value="130" />
            <Setter Property="BorderThickness" Value="0" />
            <Setter Property="BorderBrush" Value="{StaticResource TextBoxBrush}" />
            <Setter Property="Opacity" Value="0.92" />
            <Setter Property="CornerRadius" Value="5" />
            <Setter Property="Margin" Value="5" />
            <Setter Property="Padding" Value="5" />
        </Style>
        <Style x:Key="PositionBorderStyle" TargetType="{x:Type Border}">
            <Setter Property="BorderBrush" Value="Transparent" />
            <Setter Property="Margin" Value="0 2 0 0" />
            <Setter Property="Height" Value="200" />
            <Setter Property="VerticalAlignment" Value="Bottom" />
            <Setter Property="BorderThickness" Value="1" />
            <Style.Triggers>                
                <Trigger Property="Tag" Value="{StaticResource TrueValue}">
                    <Setter Property="BorderBrush" Value="LawnGreen" />
                </Trigger>
                <Trigger Property="Tag" Value="{StaticResource FalseValue}">
                    <Setter Property="BorderBrush" Value="Transparent" />
                </Trigger>
            </Style.Triggers>
        </Style>
    </UserControl.Resources>
    <Grid>
        <TextBlock Style="{StaticResource TextBlockStyle}" Tag="{Binding IsPositionChangedMessage}" Text="{Binding Path=PatientPositionChangedMessage}" />
        <Border Style="{StaticResource PositionBorderStyle}" Tag="{Binding IsPositionChanged,Mode=TwoWay}">
            <Image Source="{Binding Path=ImageScanType, Mode=TwoWay}" />
        </Border>
        <wpf:PopupBox
            IsEnabled="{Binding IsPositionChangedEnabled}"
            IsPopupOpen="False"
            Style="{DynamicResource BodyPositionPopupBoxStyle}">
            <ListBox
                x:Name="libBodyMapViewModels"
                x:Uid="libBodyMapViewModels"
                ItemsSource="{Binding Path=BodyMapViewModels, Mode=TwoWay}"
                SelectedItem="{Binding Path=SelectBodyMap, Mode=TwoWay}"
                SelectionMode="Single"
                Style="{StaticResource BodyPositionListBoxStyle}">
                <ListBox.ItemContainerStyle>
                    <Style TargetType="{x:Type ListBoxItem}">
                        <Setter Property="Template">
                            <Setter.Value>
                                <ControlTemplate TargetType="{x:Type ListBoxItem}">
                                    <Border
                                        x:Name="itemBorder"
                                        Background="Transparent"
                                        BorderThickness="0.5"
                                        CornerRadius="5"
                                        Cursor="Hand">
                                        <ContentPresenter />
                                    </Border>
                                    <ControlTemplate.Triggers>
                                        <Trigger Property="IsSelected" Value="True">
                                            <Setter TargetName="itemBorder" Property="Background" Value="{StaticResource ItemSelectedColor}" />
                                            <Setter TargetName="itemBorder" Property="BorderThickness" Value="0.5" />
                                            <Setter TargetName="itemBorder" Property="BorderBrush" Value="LightGray" />
                                            <Setter TargetName="itemBorder" Property="Opacity" Value="1" />
                                        </Trigger>
                                        <Trigger Property="IsMouseOver" Value="True">
                                            <Setter TargetName="itemBorder" Property="Background" Value="{StaticResource ItemSelectedColor}" />
                                            <Setter TargetName="itemBorder" Property="BorderThickness" Value="0.5" />
                                            <Setter TargetName="itemBorder" Property="BorderBrush" Value="LightGray" />
                                            <Setter TargetName="itemBorder" Property="Opacity" Value="1" />
                                        </Trigger>
                                    </ControlTemplate.Triggers>
                                </ControlTemplate>
                            </Setter.Value>
                        </Setter>
                    </Style>
                </ListBox.ItemContainerStyle>
                <ListBox.ItemTemplate>
                    <DataTemplate>
                        <Border Style="{StaticResource BodyPositionBorderStyle}">
                            <Image
                                Source="{Binding Path=MapImage, Mode=TwoWay}"
                                Style="{StaticResource BodyPositionImageStyle}"
                                Tag="{Binding Path=Name, Mode=TwoWay}"
                                ToolTip="{Binding Path=ToolTip, Mode=TwoWay}" />
                        </Border>
                    </DataTemplate>
                </ListBox.ItemTemplate>
            </ListBox>
        </wpf:PopupBox>
    </Grid>
</UserControl>