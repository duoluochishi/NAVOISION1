<UserControl
    x:Class="NV.CT.UI.Exam.View.SelectProtocolControl"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:i="http://schemas.microsoft.com/xaml/behaviors"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:res="clr-namespace:NV.CT.Language;assembly=NV.CT.Language"
    xmlns:wpf="http://materialdesigninxaml.net/winfx/xaml/themes"
    x:Name="ProtocolControl" d:DesignHeight="450"  d:DesignWidth="800"
    mc:Ignorable="d">
    <UserControl.Resources>
        <SolidColorBrush x:Key="BackgroundColorHalf" Opacity="0.3" Color="#5a5a89" />
        <Style
            x:Key="ProtocolMainBorderStyle"
            TargetType="{x:Type Border}">
            <Setter Property="Background" Value="{StaticResource MaterialDesignPaper}" />
            <Setter Property="CornerRadius" Value="10" />
            <Setter Property="BorderBrush" Value="{StaticResource BaseTabBackBrush}" />
            <Setter Property="BorderThickness" Value="1" />
            <Setter Property="Margin" Value="5,5,0,0" />
            <Setter Property="HorizontalAlignment" Value="Stretch" />
            <Setter Property="VerticalAlignment" Value="Stretch" />
        </Style>
        <Style
            x:Key="ProtocolBorderStyle"
            TargetType="{x:Type Border}">
            <Setter Property="Background" Value="#05050F" />
            <Setter Property="CornerRadius" Value="6" />
            <Setter Property="BorderBrush" Value="#5a5a89" />
            <Setter Property="BorderThickness" Value="1" />
            <Setter Property="HorizontalAlignment" Value="Stretch" />
        </Style>
        <Style
            x:Key="ProtocolSelectionLabelStyle"
            BasedOn="{StaticResource MaterialDesignLabel}"
            TargetType="{x:Type Label}">
            <Setter Property="FontSize" Value="15" />
            <Setter Property="FontWeight" Value="Bold" />
            <Setter Property="VerticalAlignment" Value="Center" />
            <Setter Property="HorizontalAlignment" Value="Left" />
            <Setter Property="Margin" Value="18,-2,0,0" />
            <Setter Property="Height" Value="34" />
            <Setter Property="Foreground" Value="#FFC6C6EC" />
        </Style>
        <Style
            x:Key="ProtocolSelectionRectangleStyle"
            TargetType="{x:Type Rectangle}">
            <Setter Property="Width" Value="123" />
            <Setter Property="Height" Value="3" />
            <Setter Property="StrokeThickness" Value="3" />
            <Setter Property="VerticalAlignment" Value="Bottom" />
            <Setter Property="Stroke" Value="#3044D9" />
            <Setter Property="SnapsToDevicePixels" Value="True" />
            <Setter Property="Margin" Value="18,0,0,6" />
            <Setter Property="HorizontalAlignment" Value="Left" />
        </Style>
        <Style
            x:Key="RequesterDefaultSchemeLabelStyle"
            BasedOn="{StaticResource MaterialDesignLabel}"
            TargetType="{x:Type Label}">
            <Setter Property="HorizontalAlignment" Value="Left" />
            <Setter Property="Margin" Value="18,0,0,0" />
            <Setter Property="Foreground" Value="#C4C4CB" />
            <Setter Property="VerticalAlignment" Value="Center" />
        </Style>
        <Style
            x:Key="SearchButtonStyle"
            BasedOn="{StaticResource MaterialDesignToolButton}"
            TargetType="{x:Type Button}">
            <Setter Property="HorizontalAlignment" Value="Right" />
            <Setter Property="Height" Value="24" />
            <Setter Property="Width" Value="24" />
            <Setter Property="Margin" Value="0,0,18,0" />
        </Style>
        <Style
            x:Key="IsFactoryPathStyle"
            TargetType="{x:Type Path}">
            <Setter Property="Fill" Value="#5A5A89" />
            <Setter Property="Height" Value="18" />
            <Setter Property="Width" Value="18" />
            <Setter Property="Stretch" Value="Fill" />
            <Setter Property="Margin" Value="2,4,0,0" />
            <Setter Property="VerticalAlignment" Value="Center" />
            <Setter Property="HorizontalAlignment" Value="Right" />
            <Setter Property="Stroke" Value="Transparent" />
            <Style.Triggers>
                <Trigger Property="IsEnabled" Value="True">
                    <Setter Property="Data" Value="m 82.83,115.75 a 22.17,22.17 0 1 0 44.34,0 v 0 a 22.17,22.17 0 0 0 -44.34,0 z M 105,52.5 H 93.33 l 7.59,-7.58 a 5.78,5.78 0 1 0 -8.17,-8.17 l -17.5,17.5 a 5.65,5.65 0 0 0 0,8.17 l 17.5,17.5 a 5.64,5.64 0 0 0 8.17,0 5.65,5.65 0 0 0 0,-8.17 L 93.33,64.17 H 105 a 49.58,49.58 0 1 1 -49.58,49.58 47.86,47.86 0 0 1 7,-25.08 5.9,5.9 0 0 0 -2.34,-8.17 C 57.75,78.75 53.67,79.92 52.5,82.25 A 59.68,59.68 0 0 0 43.75,113.75 61.25,61.25 0 1 0 105,52.5 Z" />
                </Trigger>
                <Trigger Property="IsEnabled" Value="False">
                    <Setter Property="Data" Value="M20,19.8596815 C20,20.996769 19.6759676,21.9688438 19.0249025,22.7819063 C18.3738374,23.5949688 17.5877588,24 16.6726673,24 L3.32733273,24 C2.40924092,24 1.62616262,23.5919686 0.97509751,22.7819063 C0.324032403,21.9688438 0,20.9937688 0,19.8596815 C0,18.9746134 0.0420042004,18.137549 0.132013201,17.3514886 C0.222022202,16.5654281 0.384038404,15.7733672 0.624062406,14.9753058 C0.864086409,14.1802446 1.17011701,13.496192 1.53915392,12.9291484 C1.90819082,12.3621048 2.40024002,11.897069 3.00930093,11.5400415 C3.61836184,11.1830141 4.32043204,11 5.11251125,11 C6.47764776,12.3351027 8.10681068,13.0011539 10.0030003,13.0011539 C11.8991899,13.0011539 13.5283528,12.3351027 14.8934893,11 C15.6855686,11 16.3846385,11.1800138 16.9966997,11.5400415 C17.6057606,11.897069 18.0948095,12.3621048 18.4668467,12.9291484 C18.8358836,13.4991922 19.1419142,14.1772444 19.3819382,14.9753058 C19.6219622,15.770367 19.7869787,16.5624279 19.8739874,17.3514886 C19.9579958,18.137549 20,18.9746134 20,19.8596815 L20,19.8596815 Z M14.242,1.758 C15.415,2.931 16,4.344 16,6 C16,7.656 15.415,9.069 14.242,10.242 C13.069,11.415 11.656,12 10,12 C8.344,12 6.931,11.415 5.758,10.242 C4.585,9.069 4,7.656 4,6 C4,4.344 4.585,2.931 5.758,1.758 C6.931,0.585 8.344,0 10,0 C11.656,0 13.069,0.585 14.242,1.758 Z" />
                </Trigger>
            </Style.Triggers>
        </Style>
        <Style
            x:Key="ProtocolListBoxItemStyle"
            BasedOn="{StaticResource MaterialDesignListBoxItem}"
            TargetType="{x:Type ListViewItem}">
            <Setter Property="Background" Value="Transparent" />
            <Setter Property="Foreground" Value="#5a5a89" />
            <Setter Property="Padding" Value="0" />
            <Setter Property="HorizontalAlignment" Value="Stretch" />
        </Style>
        <Style
            x:Key="ProtocolListBoxStyle"
            BasedOn="{StaticResource MaterialDesignListBox}"
            TargetType="{x:Type ListView}">
            <Setter Property="ItemContainerStyle" Value="{StaticResource ProtocolListBoxItemStyle}" />
            <Setter Property="Background" Value="#16162B" />
            <Setter Property="MaxHeight" Value="785" />
            <Setter Property="MinHeight" Value="30" />
            <Setter Property="Margin" Value="18,0,0,0" />
            <Setter Property="FontSize" Value="14" />
            <Setter Property="VerticalAlignment" Value="Top" />
            <Setter Property="HorizontalAlignment" Value="Stretch" />
        </Style>
        <Style
            x:Key="ProtocolListTextBlockStyle"
            TargetType="{x:Type TextBlock}">
            <Setter Property="VerticalAlignment" Value="Center" />
            <Setter Property="Foreground" Value="#4E4E78" />
            <Setter Property="FontSize" Value="14" />
            <Setter Property="FontWeight" Value="Bold" />
            <Setter Property="HorizontalAlignment" Value="Left" />
        </Style>
        <Style
            x:Key="ProtocolListTitleTextBlockStyle"
            TargetType="{x:Type TextBlock}">
            <Setter Property="Foreground" Value="#C4C4CB" />
            <Setter Property="FontSize" Value="16" />
            <Setter Property="FontWeight" Value="Bold" />
        </Style>
        <Style
            x:Key="ScanReconListBoxItem"
            TargetType="{x:Type ListBoxItem}">
            <Setter Property="Foreground" Value="#4E4E78" />
            <Setter Property="Background" Value="Transparent" />
            <Setter Property="HorizontalContentAlignment" Value="Stretch" />
            <Setter Property="VerticalContentAlignment" Value="Center" />
            <Setter Property="MinHeight" Value="22" />
            <Setter Property="Margin" Value="0" />
            <Setter Property="Padding" Value="3,0,0,0" />
            <Setter Property="SnapsToDevicePixels" Value="True" />
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type ListBoxItem}">
                        <ContentPresenter
                            Margin="{TemplateBinding Padding}"
                            HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                            VerticalAlignment="{TemplateBinding VerticalContentAlignment}"
                            SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" />
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        <Style
            x:Key="ProtocolListBoxTitleBorderStyle"
            TargetType="{x:Type Border}">
            <Setter Property="Background" Value="{StaticResource BackgroundColorHalf}" />
            <Setter Property="CornerRadius" Value="4 4 0 0" />
            <Setter Property="BorderBrush" Value="#FF5A5A89" />
            <Setter Property="BorderThickness" Value="0,0,0,1" />
        </Style>
        <Style
            x:Key="ProtocolListBoxTitleStackPanelStyle"
            TargetType="{x:Type StackPanel}">
            <Setter Property="Width" Value="520" />
            <Setter Property="Height" Value="20" />
            <Setter Property="Orientation" Value="Horizontal" />
            <Setter Property="Margin" Value="5,5,0,5" />
            <Setter Property="HorizontalAlignment" Value="Left" />
            <Setter Property="VerticalAlignment" Value="Center" />
        </Style>
        <Style
            x:Key="ProtocolListBoxTitleOnTopPathStyle"
            BasedOn="{StaticResource IconStickOnTop}"
            TargetType="{x:Type Path}">
            <Setter Property="Width" Value="16" />
            <Setter Property="Height" Value="16" />
            <Setter Property="Stretch" Value="Fill" />
            <Setter Property="ToolTip" Value="OnTop" />
            <Setter Property="Fill" Value="#5A5A89" />
            <Style.Triggers>
                <Trigger Property="IsEnabled" Value="True">
                    <Setter Property="Visibility" Value="Visible" />
                </Trigger>
                <Trigger Property="IsEnabled" Value="False">
                    <Setter Property="Visibility" Value="Hidden" />
                </Trigger>
            </Style.Triggers>
        </Style>
        <Style
            x:Key="IconEnhancePathStyle"
            BasedOn="{StaticResource SEnhance}"
            TargetType="{x:Type Path}">
            <Setter Property="Fill" Value="#C4C4CB" />
            <Setter Property="Height" Value="16" />
            <Setter Property="Width" Value="16" />
            <Setter Property="Stretch" Value="Uniform" />
            <Setter Property="Margin" Value="8,0,0,0" />
            <Setter Property="Stroke" Value="Transparent" />
            <Style.Triggers>
                <Trigger Property="IsEnabled" Value="True">
                    <Setter Property="Visibility" Value="Visible" />
                </Trigger>
                <Trigger Property="IsEnabled" Value="False">
                    <Setter Property="Visibility" Value="Hidden" />
                </Trigger>
            </Style.Triggers>
        </Style>
        <Style
            x:Key="ProtocolListContentTextBlockStyle"
            BasedOn="{StaticResource ProtocolListTextBlockStyle}"
            TargetType="{x:Type TextBlock}">
            <Setter Property="Foreground" Value="#C4C4CB" />
            <Setter Property="FontWeight" Value="Normal" />
        </Style>
        <Style
            x:Key="ProtocolListContentTextBlockNormalStyle"
            BasedOn="{StaticResource ProtocolListTextBlockStyle}"
            TargetType="{x:Type TextBlock}">
            <Setter Property="FontWeight" Value="Normal" />
            <!--<Setter Property="FontSize" Value="14px" />-->
        </Style>
        <Style
            x:Key="ChildListCheckboxStyle"
            BasedOn="{StaticResource MaterialDesignCheckBox}"
            TargetType="CheckBox">
            <Setter Property="Foreground" Value="{StaticResource BaseForegroundColor}" />
            <Setter Property="Background" Value="{StaticResource BaseForegroundColor}" />
            <Setter Property="VerticalAlignment" Value="Bottom" />
            <Setter Property="VerticalContentAlignment" Value="Bottom" />
            <Setter Property="HorizontalAlignment" Value="Left" />
            <Style.Triggers>
                <Trigger Property="IsEnabled" Value="True">
                    <Setter Property="Visibility" Value="Visible" />
                </Trigger>
                <Trigger Property="IsEnabled" Value="False">
                    <Setter Property="Visibility" Value="Hidden" />
                </Trigger>
            </Style.Triggers>
        </Style>
        <Style
            x:Key="ChildListTextBlockStyle"
            BasedOn="{StaticResource ProtocolListTextBlockStyle}"
            TargetType="{x:Type TextBlock}">
            <Setter Property="FontWeight" Value="Normal" />
            <Setter Property="Margin" Value="22 0 0 0" />
            <Setter Property="Foreground" Value="{StaticResource BaseForegroundColor}" />
            <Style.Triggers>
                <Trigger Property="IsEnabled" Value="False">
                    <Setter Property="Visibility" Value="Visible" />
                </Trigger>
                <Trigger Property="IsEnabled" Value="True">
                    <Setter Property="Visibility" Value="Hidden" />
                </Trigger>
            </Style.Triggers>
        </Style>
        <Style
            x:Key="ProtocolButtonStyle"
            BasedOn="{StaticResource MaterialDesignRaisedButton}"
            TargetType="{x:Type Button}">
            <Setter Property="Height" Value="40" />
            <Setter Property="Width" Value="100" />
            <Setter Property="HorizontalAlignment" Value="Left" />
            <Setter Property="Background" Value="{StaticResource BaseBackgroundColor}" />
            <Setter Property="wpf:ButtonAssist.IsEnable" Value="{Binding RelativeSource={RelativeSource Mode=Self}, Path=IsEnabled, Mode=TwoWay}" />
        </Style>
    </UserControl.Resources>
    <Border Style="{StaticResource ProtocolMainBorderStyle}">
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="135" />
                <RowDefinition Height="*" />
                <RowDefinition Height="50" />
            </Grid.RowDefinitions>
            <Grid Grid.Row="0">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="220" />
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="160" />
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition Height="45" />
                    <RowDefinition Height="40" />
                    <RowDefinition Height="53" />
                </Grid.RowDefinitions>
                <!--  标题  -->
                <Label
                    Grid.ColumnSpan="2"
                    Content="{x:Static res:LanguageResource.Content_ProtocolSelection}"
                    Style="{StaticResource ProtocolSelectionLabelStyle}" />
                <Rectangle
                    Grid.Column="0"
                    Style="{StaticResource ProtocolSelectionRectangleStyle}" />
                <!--  配置区域  -->
                <Label
                    Grid.Row="1"
                    Grid.Column="0"
                    Content="{x:Static res:LanguageResource.Content_RequesterDefaultScheme}"
                    Style="{StaticResource RequesterDefaultSchemeLabelStyle}" />
                <TextBox
                    Grid.Row="1"
                    Grid.Column="1"
                    IsEnabled="False"
                    Text="{Binding StudyDescription}" />
                <Button
                    Grid.Row="1"
                    Grid.Column="2"
                    Margin="10,0,18,0"
                    Content="{x:Static res:LanguageResource.Content_SaveConfig}" 
                    Command="{Binding Commands[SaveConfigCommand]}"/>
                <!--  协议搜索框  -->
                <TextBox
                    x:Name="SelectProtocolSearchBox"
                    x:Uid="SelectProtocolSearchBox"
                    Grid.Row="2"
                    Grid.Column="0"
                    Grid.ColumnSpan="3"
                    Margin="18,0,18,0"
                    wpf:HintAssist.Hint="{x:Static res:LanguageResource.Hint_Search}"
                    wpf:TextFieldAssist.DecorationVisibility="Hidden"
                    wpf:TextFieldAssist.TextFieldCornerRadius="14">
                    <TextBox.InputBindings>
                        <!--  键盘事件绑定  -->
                        <KeyBinding
                            Key="Enter"
                            Command="{Binding Commands[SearchCommand]}"
                            CommandParameter="{Binding ElementName=SelectProtocolSearchBox, Path=Text}" />
                    </TextBox.InputBindings>
                </TextBox>
                <Button
                    x:Name="btnSelectProtocolSearchBox"
                    x:Uid="btnSelectProtocolSearchBox"
                    Grid.Row="2"
                    Grid.Column="2"
                    Grid.ColumnSpan="3"
                    Command="{Binding Commands[SearchCommand]}"
                    CommandParameter="{Binding ElementName=SelectProtocolSearchBox, Path=Text}"
                    Style="{StaticResource SearchButtonStyle}">
                    <wpf:PackIcon
                        Foreground="White"
                        Kind="Magnify"
                        Opacity=".56" />
                </Button>
            </Grid>
            <ListView
                x:Name="ListView"
                Grid.Row="1"
                IsSynchronizedWithCurrentItem="True"
                ItemsSource="{Binding ProtocolList, Mode=TwoWay}"
                MouseDoubleClick="ListView_OnMouseDoubleClick"
                ScrollViewer.CanContentScroll="False"
                SelectedItem="{Binding SelectedProtocol, Mode=TwoWay}"
                Style="{StaticResource ProtocolListBoxStyle}">
                <ListView.ContextMenu>
                    <ContextMenu Placement="MousePoint">
                        <MenuItem
                            Command="{Binding Commands[TopCommand]}"
                            Header="{x:Static res:LanguageResource.Header_Top}"
                            ToolTip="{x:Static res:LanguageResource.ToolTip_ToTop}">
                            <MenuItem.Icon>
                                <Path
                                    Fill="{StaticResource TextBoxBrush}"
                                    Stretch="Fill"
                                    Style="{StaticResource IconStickOnTop}" />
                            </MenuItem.Icon>
                        </MenuItem>
                        <MenuItem
                            Command="{Binding Commands[UnpinCommand]}"
                            Header="{x:Static res:LanguageResource.Header_Unpin}"
                            ToolTip="{x:Static res:LanguageResource.ToolTip_CancelTop}">
                            <MenuItem.Icon>
                                <wpf:PackIcon
                                    Width="18"
                                    Height="18"
                                    Foreground="{StaticResource TextBoxBrush}"
                                    Kind="Cancel" />
                            </MenuItem.Icon>
                        </MenuItem>
                    </ContextMenu>
                </ListView.ContextMenu>
                <ListView.ItemTemplate>
                    <DataTemplate>
                        <Grid
                            Height="154"
                            Margin="0,2,0,5">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="40" />
                                <RowDefinition Height="*" />
                            </Grid.RowDefinitions>
                            <Border
                                Name="my_border"
                                Grid.Row="0"
                                Grid.RowSpan="2"
                                Style="{StaticResource ProtocolBorderStyle}" />
                            <Border
                                Grid.Row="0"
                                Style="{StaticResource ProtocolListBoxTitleBorderStyle}" />
                            <Grid
                                Grid.Row="0"
                                HorizontalAlignment="Stretch">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="24" />
                                    <ColumnDefinition Width="565" />
                                    <ColumnDefinition Width="*" />
                                    <ColumnDefinition Width="36" />
                                </Grid.ColumnDefinitions>
                                <Path
                                    IsEnabled="{Binding Path=IsFactory}"
                                    Style="{StaticResource IsFactoryPathStyle}" />
                                <StackPanel
                                    Grid.Column="1"
                                    Style="{StaticResource ProtocolListBoxTitleStackPanelStyle}">
                                    <TextBlock
                                        Style="{StaticResource ProtocolListTitleTextBlockStyle}"
                                        Text="{Binding ProtocolName}" />
                                    <Path
                                        x:Name="IconEnhance"
                                        IsEnabled="{Binding IsEnhanced}"
                                        Style="{StaticResource IconEnhancePathStyle}" />
                                </StackPanel>
                                <CheckBox
                                    Grid.Column="2"
                                    Content="{x:Static res:LanguageResource.Content_TheDefaultMatching}"
                                    IsChecked="{Binding IsDefaultMatch, Mode=TwoWay}"/>
                                <Path
                                    Grid.Column="3"
                                    IsEnabled="{Binding IsOnTop}"
                                    Style="{StaticResource ProtocolListBoxTitleOnTopPathStyle}" />
                            </Grid>
                            <Grid Grid.Row="1">
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="30" />
                                    <RowDefinition Height="52" />
                                    <RowDefinition Height="32" />
                                </Grid.RowDefinitions>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="10" />
                                    <ColumnDefinition Width="289" />
                                    <ColumnDefinition Width="147" />
                                    <ColumnDefinition Width="*" />
                                </Grid.ColumnDefinitions>
                                <TextBlock
                                    Grid.Row="0"
                                    Grid.Column="1"
                                    Style="{StaticResource ProtocolListTextBlockStyle}"
                                    Text="{x:Static res:LanguageResource.Text_Indications}" />
                                <TextBlock
                                    Grid.Row="1"
                                    Grid.Column="1"
                                    Height="48"
                                    LineHeight="14"
                                    Style="{StaticResource ProtocolListContentTextBlockNormalStyle}"
                                    Text="{Binding Description}"
                                    TextWrapping="Wrap" />
                                <TextBlock
                                    Grid.Row="2"
                                    Grid.Column="1"
                                    Style="{StaticResource ProtocolListContentTextBlockStyle}"
                                    Text="{x:Static res:LanguageResource.Text_ScanMode}" />
                                <TextBlock
                                    Grid.Row="2"
                                    Grid.Column="1"
                                    Width="180"
                                    Margin="90,0,0,0"
                                    Style="{StaticResource ProtocolListContentTextBlockStyle}"
                                    Text="{Binding ScanMode}" />
                                <TextBlock
                                    Grid.Row="0"
                                    Grid.Column="2"
                                    Grid.ColumnSpan="2"
                                    Margin="5,0,0,0"
                                    Style="{StaticResource ProtocolListTextBlockStyle}"
                                    Text="{x:Static res:LanguageResource.Text_ScanRange}" />
                                <TextBlock
                                    Grid.Row="0"
                                    Grid.Column="3"
                                    Margin="35,0,0,0"
                                    Style="{StaticResource ProtocolListTextBlockStyle}"
                                    Text="{x:Static res:LanguageResource.Text_ReconstructionMission}" />
                                <ListView
                                    Grid.Row="1"
                                    Grid.RowSpan="2"
                                    Grid.Column="2"
                                    Grid.ColumnSpan="2"
                                    Margin="0,0,10,0"
                                    HorizontalAlignment="Stretch"
                                    Background="Transparent"
                                    ItemsSource="{Binding ScanRangeList}">
                                    <ListView.ItemContainerStyle>
                                        <Style BasedOn="{StaticResource ScanReconListBoxItem}" TargetType="{x:Type ListBoxItem}" />
                                    </ListView.ItemContainerStyle>
                                    <ListView.ItemTemplate>
                                        <DataTemplate>
                                            <Grid Height="22">
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="180" />
                                                    <ColumnDefinition Width="*" />
                                                </Grid.ColumnDefinitions>
                                                <CheckBox
                                                    Grid.Column="0"                                                   
                                                    Content="{Binding ScanRange}"
                                                    IsChecked="{Binding ScanRangeIsChecked, Mode=TwoWay}"
                                                    Style="{StaticResource ChildListCheckboxStyle}"
                                                    IsEnabled="{Binding IsShowScanCheckBox, Mode=TwoWay}" />
                                                <TextBlock
                                                    Grid.Column="0"
                                                    Style="{StaticResource ChildListTextBlockStyle}"
                                                    IsEnabled="{Binding IsShowScanCheckBox, Mode=TwoWay}" 
                                                    Text="{Binding ScanRange}" />
                                                <TextBlock
                                                    Grid.Column="1"
                                                    Style="{StaticResource ProtocolListContentTextBlockNormalStyle}"
                                                    Text="{Binding ReconNameList}" />
                                            </Grid>
                                        </DataTemplate>
                                    </ListView.ItemTemplate>
                                </ListView>
                            </Grid>
                        </Grid>
                        <DataTemplate.Triggers>
                            <DataTrigger
                                Binding="{Binding IsSelected, RelativeSource={RelativeSource AncestorType={x:Type ListBoxItem}, Mode=FindAncestor}}"
                                Value="True">
                                <Setter TargetName="my_border" Property="Background" Value="{StaticResource BaseBackgroundColor}" />
                                <Setter TargetName="my_border" Property="Opacity" Value="0.92" />
                                <Setter TargetName="IconEnhance" Property="Fill" Value="White" />
                            </DataTrigger>
                            <DataTrigger
                                Binding="{Binding IsMouseOver, RelativeSource={RelativeSource AncestorType={x:Type ListBoxItem}, Mode=FindAncestor}}"
                                Value="True">
                                <Setter TargetName="my_border" Property="Background" Value="{StaticResource BaseBackgroundColor}" />
                                <Setter TargetName="my_border" Property="Opacity" Value="0.92" />
                                <Setter TargetName="IconEnhance" Property="Fill" Value="White" />
                            </DataTrigger>                           
                        </DataTemplate.Triggers>
                    </DataTemplate>
                </ListView.ItemTemplate>
            </ListView>
            <StackPanel
                Grid.Row="2"
                Orientation="Horizontal">
                <Button
                    Margin="18,0,0,0"
                    Command="{Binding Commands[AddTaskCommand]}"
                    Content="{x:Static res:LanguageResource.Content_Add}"
                    Style="{StaticResource ProtocolButtonStyle}" />
                <Button
                    Margin="10,0,0,0"
                    Command="{Binding Commands[ReplaceTaskCommand]}"
                    Content="{x:Static res:LanguageResource.Content_Replace}"
                    Style="{StaticResource ProtocolButtonStyle}" />
            </StackPanel>
        </Grid>
    </Border>
</UserControl>